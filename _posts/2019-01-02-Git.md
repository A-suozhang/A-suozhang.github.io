---
layout:     post                    # ä˝żç¨çĺ¸ĺąďźä¸éčŚćšďź
title:      ĺŚä˝ä˝żç¨Git            # ć é˘ 
subtitle:   ĺćĄŁĺćĄŁĺćĄŁĺćĄŁďź        #ĺŻć é˘
date:       2020-02-12              # ćśé´
author:     tianchen                      # ä˝č
header-img:  img/6_1/zhongnan.jpg  #čżçŻćçŤ ć é˘čćŻĺžç
catalog: true                       # ćŻĺŚĺ˝ćĄŁ
tags:                               #ć ç­ž
     - Coding
---

# ĺŚä˝ć­Łĺ¸¸ä˝żç¨git

> ĺ°ééąźA_suozhangéčŚä¸äşčŽ°ĺ˝ćĽäżčŻčŞĺˇąä¸äźĺżčŽ°čżäşĺ˝äť¤

## WorkFlow

### Simplest Example

* ![](https://github.com/A-suozhang/MyPicBed/raw/master/img/20200317152359.jpg)
* éŚĺ ```git init``` ĺĺťşäťĺş
* ĺˇĽä˝ćľďź3ćŁľć ďź
  * ![](https://github.com/A-suozhang/MyPicBed/raw/master/img/20191202180520.png)
  * ä¸­é´çćŻindex(ćĺ­ĺşďźďźćŻä¸ä¸Şçźĺ­ĺşĺ
  * ćĺçćŻHeadďźäšĺ°ąćŻćĺćĺä¸ćŹĄćäş¤(Commit)ççťćďźďź*ĺ°äşheadčżä¸äťŁčĄ¨ĺ°äşremote repositoryčżç¨äťĺş*
* ```git add .```ĺ°ĺ˝ĺçŽĺ˝çćšĺ¨ćĺ­(Stage)
  * čżä¸Şĺ˝äť¤ĺŻč˝äźĺ°ä¸äşĺĽćŞçä¸čĽżćˇťĺ čżćĽďźĺťşčŽŽćŻç¨```git add -a```ćˇťĺ ćšĺ¨ĺş(ć˛Ąstagedçä¸ĺ )ďźçśĺ```git commit -a```
* ```git commit -m "XXX"```ĺ°Indexä¸­çĺĺŽšćäş¤çťhead
* ```git push ```ć¨éćšĺ¨
  
### ĺćŻ (Branch)

> ĺśäş§çćŻä¸şäşçšć§ĺźĺçťçźďźĺĺťşäťĺşçćśĺďźéťčŽ¤ĺćŻä¸şâMasterâ

* ĺĺťşć°çĺćŻ ```git checkout -b feature_x ```
  * ĺ é¤ć°çĺćŻ(ĺ˝çśä˝ éŚĺčŚĺĺä¸ťĺćŻ) ```git branch -d feature_x```
  * ć¨éĺ°ĺ˝ĺĺćŻ ```git push origin feature_x```
* ĺć˘ĺĺ°ä¸ťĺćŻ ```git checkout master```

### ć´ć°ä¸ĺĺšś 

* ć´ć°ćŹĺ°äťĺş(Local Repo)ĺ°ćć°çćšĺ¨ ```git pull``` 
  * ç¸ĺ˝äşĺ¨çŽĺççŽĺ˝ä¸­čˇĺ(Fetch)ĺšśä¸ĺĺšś(Merge)äşčżçŤŻ(Remote)çćšĺ¨
  * čżéçmergećŻéťčŽ¤fast forwardç
* ĺŚćä˝ ĺŞćłĺĺšśĺśäťćä¸ŞĺćŻĺ°ä˝ çĺ˝ĺĺćŻ ```git merge branch```
* *ć§čĄäťĽä¸ä¸¤čçćśĺé˝čŞĺ¨ĺĺšśĺ˛çŞ(Conflict)ďźććśĺĺŻč˝ä¸ćĺďźĺ°ąčŚćĺ¨ĺĺšśďźäżŽćšĺŽäšĺĺŠç¨```git add <Filename>```ćĽčĄ¨ĺžĺĺšśĺŽćŻďźĺ¨ĺĺšśçćśĺĺŠç¨```git diff <Source_Branch> <Target Branch>```*
* ćżć˘ćŹĺ°ćäťśďźéç¨```git checkout <filename>```ç¨headä¸­çćäťśćżć˘ćŹĺ°çćäťśďźä˝ćŻä¸äźćšĺstageďź
	* [Tutorial Link](https://www.atlassian.com/git/tutorials/resetting-checking-out-and-reverting)
	* éčŚĺşĺĺresetĺrevertçĺşĺŤ
		* revert čĄ¨ç¤şĺŻšpublic branchć¤écommit,ć˛ĄćĺŻšćäťśćä˝çćšĺź
		* resetĺŻšćäťśćä˝ćŻĺUnstage,čĺŻšcommitĺčĄ¨ç¤şć¤éćććŞçťcommitçĺĺ
			* ![](https://github.com/A-suozhang/MyPicBed/raw/master/img/20200103191416.png)
			* ![](https://github.com/A-suozhang/MyPicBed/raw/master/img/20200103191529.png)
				* ```git checkout $FILENAME```ćŻĺç´ćĽĺremoteéç˝Ž
		* checkoutĺŻšćäťśćŻćšĺworking directoryä¸­çĺĺŽš(ä¸äźćšĺstageĺşĺ),ĺŻšcommitĺčĄ¨ç¤şĺć˘branch
		* *ĺŻšćä¸Şĺˇä˝çcommitĺŻäťĽspecify commit,like ```git reset HEAD~2```*
  * ĺ°Headĺ¤ĺśĺ°äşLocal Repo
* ```git reset -- files ```ć¤éćĺä¸ćŹĄgit add
  * äšĺ°ąćŻć¤éstageĺşĺ
* ćżć˘ć´ä¸ŞćŹĺ°äťĺşä¸şäşçŤŻçćŹďźĺčˇĺćĺĄĺ¨çćć°çćŹ```git fetch origin```ďźĺ°ćŹĺ°äťĺşćĺĺŽ ```git reset --hard origin/master```
* **mergeä¸rebaseçĺşĺŤ**
	* ĺ˝ć§čĄgit pushçćśĺéťčŽ¤čżčĄäşmerge
	* ĺŚćĺ˝ĺŞćŻćŹĺ°çĺ°ćšĺ¨çčŻĺŻäťĽä˝żç¨```git rebase -i origin/XXX```
		* rebaseĺŽäşčżćŻčŚpushçĺŚ
* git pullĺgit fetch
	* git pullç¸ĺ˝äşĺfetchĺmerge
	* git fetchä¸ćĽĺŞćŻć´ć°äş.gitĺé¨ç,ĺçźŠčżçć°çćŹäťŁç 
		* čżć ˇĺ°ąĺŻäťĽĺŠç¨git diffćĽćĽçĺčżç¨çćäťäšĺşĺŤäş
	* [Dont Just Pull, Fetch & Merge](https://longair.net/blog/2009/04/16/git-fetch-and-merge/)
	* ć§čĄgit mergeäšĺĺŚćĺşç°ĺ˛çŞ,gitäźç´ćĽĺ¨ä˝ çćäťśéäżŽćš,ĺĺťćĺ˛çŞćśé¤äšĺĺaddçśĺcommitĺ°ąĺĽ˝äş

* Git Mergeçä¸¤ç§ćĺľ (Fast-Forward or not) ĺč[ĺ ä¸Şĺ¨ĺž](https://dev.to/lydiahallie/cs-visualized-useful-git-commands-37p1)
  * éťčŽ¤ćŻFFçďźĺ ä¸ --no-ff ä¸ĺťff
  * FFďźWhen Current Branch have no Commits to the merging branch
    * DO-NOT Create a new commit 
    * ĺŞćŻĺçşŻçćć°çbranchčżĺ°äşĺćĽçbranchä¸ĺšśä¸ćHEADćĺĺś
  * No-FFďźĺŚćĺ˝ĺçbranchćć°çcommit
    * ä¸čŹĺşç°ĺ¨ććŹĺ°ćšĺ¨äşä¸ä¸ŞCommitďźä˝ćŻĺŤäşşäšĺžRemoteä¸commitäşďźĺŻźč´ç°ĺ¨çremoteĺˇ˛çťä¸ćŻäšĺććŹĺ°ççćŹäş
    * Git creates a new active Node (Merging Commit)
    * ĺ˝ĺçMerge CONFILCTçćśĺďźćäťŹéčŚćĺ¨Fixĺšśä¸čżčĄä¸ä¸ŞCommitďźćäťŹĺ°ąćĺ¨ĺĺťşäşä¸ä¸ŞMerge Commit

* ĺŻšä¸ä¸ŞBranchçĺĺŽščżčĄć´ć°çĺćłé¤äşMergeĺ°ąćŻRebase
  * It copies the commit of current branch, and put it on top of the merging branch
  * ä˝ćŻďźrebaseäźç´ćĽç¨ç°ćçćĺľĺťčŚçmerging branchçĺĺŽš(ĺ ä¸şéŚĺčŚčŽŠmerging branchäźĺ°Current branch commitäšĺççść)ďźĺ ć­¤ä¸äźćMERGE CONFLICTďźäšä¸äźćMerge CommitčçšďźčŽŠć´ä¸Şĺźĺć äżćçşżć§
  * ĺ ä¸şĺžĺąéŠďźćäťĽä¸čŹčŚç¨rebase -ićĽčżčĄć§ĺś

* ĺŚĺ¤ä¸ç§ćšćłćŻCherry-pick
  * ĺŚćĺŻšĺŚä¸ä¸Şbranchçĺ¤ä¸Şcommitä¸­ĺŞćłčŚĺźĺĽä¸ä¸ŞčżćĽďźĺŚćmergeçčŻäźĺ¨é˝čččżćĽďźĺŻäťĽç¨```git cherry-pick COMMIT_ID```

* Merge-Conflictçexample
	* ćŻĺŚčŻ´ćĺĺ¨ćŹĺ°ĺäşäżŽćšĺšśä¸commitä¸pushäşďźpushçćśĺćĽéčĄ¨ç¤şćremotećäşććŹĺ°ć˛Ąćçć´ćšďźpullä¸ćĽäšĺĺç°conflictäşďźćäťŹéčŚćĺ¨äżŽĺ¤conflict
	* äźĺşç°čżć ˇçé˘ĺ¤ĺĺŽš
		* <<<< HEAD 
		* ćĺćäżŽćšçĺĺŽš
		* =========
		* remoteä¸ĺŤäşşäżŽćšçĺĺŽš
		* ======> remote_commit ID
	

## čĄĽĺďźComplementďźä¸ĺé(reset/checkout/revert)

* ```git commit --amend``` ĺŻäťĽĺżŤćˇäżŽćšĺ˝ĺçcommit
	* çśĺĺ¨amendĺşćĽçćäťśéćˇťĺ çŹŹäşćŹĄcommitĺäşĺĽ,äżĺ­äšĺéĺş
	* ĺŚćä¸ä¸ä¸Şcommitć˛Ąćpushä¸ĺť,éŁäšäźç´ćĽćżäťŁć˛Ąćĺłçłť
	* ĺŚćä¸ä¸ä¸Şĺˇ˛çťpushä¸ĺťäş,çąäşéčŚčŚçäźĺ˛çŞ,ćäťĽéčŚç¨```git push -f```

---

### ĺé reset/checkout/revert

#### ĺ¨Commitĺąé˘

1. resetďźĺ°ćä¸ŞĺćŻçćŤçŤŻćĺćä¸Şćäş¤
  * ```git reset HEAD~2``` - ĺ°ĺ˝ĺbranchçĺéä¸¤ä¸Şcommit
    * ćSoftĺHardä¸¤ç§ďźĺŻäťĽç¨```git reset --soft HEAD~2```ćĽćĺŽďźsoftçčŻĺŞäźç§ťĺ¨HEADçćĺçä˝ç˝Žďźĺé˘çä¸¤ä¸ŞCommitäžçśćŻĺŻäťĽAccessçďźä˝ćŻhardçčŻćĺçä¸¤ä¸Şcommitĺ°č˘Ťĺ é¤(äšĺćŹćŹĺ°çStageäťĽĺWorking Directoryä¸­çć°ćäťś)
  * ç¸ĺŻšĺąéŠďźčŻˇĺŞç¨äşprivate repo
2. checkout - ä¸čŹç¨äşĺć˘ĺćŻ
  * é¤äşć˘ĺćŻäšĺ¤ďźäšĺŻäťĽĺć˘ĺ°ĺŤçćäş¤```git checkout HEAD~2```
  * gitäźĺźşĺśčŚçćŹĺ°çććć´ćšďźćäťĽGitäźčŚćąä˝ é˘ĺStageććçć´ćšďźćĺé˝äźä¸˘ĺ¤ą
3. revertç¸ĺŻšĺŽĺ¨ďźĺ¨ć¤éä¸ä¸Şćäş¤çćśĺäźĺĺťşä¸ä¸Şć°çCommitďźĺŽĺšśä¸äźéĺcommitĺĺ˛ďźĺŞćŻćžĺşä¸ä¸Şcommitďźĺšśä¸ĺĺťşä¸ä¸Şć°çcommitĺ ĺĽ ```git revert HEAD~2```
   * äżĺ­äşäšĺçććďźĺŞćŻć°ĺ äşä¸ä¸Ş 

#### ĺ¨Fileĺąé˘

1. reset - ĺ°çźĺ­ĺş(Stash)ĺć­Ľĺ°ä˝ ćĺŽçCommit ```git reset HEAD~2 foo.py```ä¸äźĺ˝ąĺWorking Directoryä¸­çćäťś
2. checkout - çąťäźźďźĺ°ąćŻćšĺWorking Directoryä˝ćŻä¸ćšĺStash


## ćĽçäżĄćŻ

* ```git status```
* ```git reflog```
* ```git log``` ćĽçäťĽĺžçcommité˝ĺäşäťäš (ĺŚćéčŚćŻčžç˛žçŽçäžżäşćĽćžIDç¨```git reflog```ďźçśĺéčżresetčˇĺžçĽç§çćśĺćşćć)
* ```git log --graph```
	* ![](https://github.com/A-suozhang/MyPicBed/raw/master/img/20200103190137.png)
* ```git remote -V```
	* ć˛Ąćäťäšĺľç¨çĺč˝
	* ![](https://github.com/A-suozhang/MyPicBed/raw/master/img/20200103190234.png)
* ```ls .git/refs/remotes/origin/```
	* ```git branch -r```
* ``git show``` ćĽçĺ˝ĺcommitçäżŽćšćĺľ




### Gitignore
#### Tempelate
* ĺŻäťĽä˝żç¨[GitĺŽćšćäžçä¸äşć¨Ąćż](https://github.com/github/gitignore),ĺŻäťĽćé¤ćBuildćäş§ççćäťś

#### Place
* ĺ°ąćžĺ¨.gitćäťśćĺ¨ççŽĺ˝

### Usage
* äżĺ­.gitginoreäšĺĺŻäťĽä˝żç¨```git status```ćĽćŁćĽćŻĺŚć­ŁçĄŽ(Vscodeç´ćĽç¨gitćĄĺ­éé˘ç)
* äšĺŻäťĽç¨```git check-ignore -v XXX```
* ä¸ťčŚç¨ĺ°ç (ćŻćéťčžéé)
  *   *.pth
  *   folder1/folder2   
*  ĺˇ˛çťä¸äź ç,ĺäżŽćšäşgitignore (ć¸çŠşçźĺ­ĺŻäťĽč§Łĺł)
```
git rm -r --cached .
add .
```

* ä¸äşçŽĺçć¨Ąćż

```

#ćł¨é           .gitignoreçćł¨é
*.txt           ĺż˝çĽćć .txt ĺçźçćäťś
!src.a          ĺż˝çĽé¤ src.a ĺ¤çĺśäťćäťś
/todo           äťĺż˝çĽéĄšçŽć šçŽĺ˝ä¸ç todo ćäťśďźä¸ĺćŹ src/todo
build/          ĺż˝çĽ build/çŽĺ˝ä¸çćććäťśďźčżćť¤ć´ä¸Şbuildćäťśĺ¤šďź
doc/*.txt       ĺż˝çĽdocçŽĺ˝ä¸ćć .txt ĺçźçćäťśďźä˝ä¸ĺćŹdocĺ­çŽĺ˝ç .txt çćäťś

bin/:           ĺż˝çĽĺ˝ĺčˇŻĺžä¸ç bin ćäťśĺ¤šďźčŻĽćäťśĺ¤šä¸çććĺĺŽšé˝äźč˘Ťĺż˝çĽďźä¸ĺż˝çĽ bin ćäťś
/bin:           ĺż˝çĽć šçŽĺ˝ä¸ç bin ćäťś
/*.c:           ĺż˝çĽ cat.cďźä¸ĺż˝çĽ build/cat.c
debug/*.obj:    ĺż˝çĽdebug/io.objďźä¸ĺż˝çĽ debug/common/io.objĺtools/debug/io.obj
**/foo:         ĺż˝çĽ/foo, a/foo, a/b/fooç­
a/**/b:         ĺż˝çĽa/b, a/x/b, a/x/y/bç­
!/bin/run.sh    ä¸ĺż˝çĽbinçŽĺ˝ä¸çrun.shćäťś
*.log:          ĺż˝çĽćć .log ćäťś
config.js:      ĺż˝çĽĺ˝ĺčˇŻĺžç config.js ćäťś

/mtk/           ĺż˝çĽć´ä¸Şćäťśĺ¤š
*.zip           ĺż˝çĽćć.zipćäťś
/mtk/do.c       ĺż˝çĽćä¸Şĺˇä˝ćäťś

```

* ĺŻäťĽç´ćĽç¨`git clone`ĺ°äťĺşćˇč´ĺ°ćŹĺ°çĺśäťä˝ç˝Ž


# ĺˇä˝ćä˝CheatSheet


#### ĺŻšćä¸ŞrepoĺĺŻç push

* ćĺźčŻĽĺˇĽç¨çŽĺ˝ä¸ç.git/config
  * ĺ°urlćšć```https://A-suozhang:$PASSWD@github.com/A-suozhang/$REPO_NAME```

* čŽžç˝Žĺ¨ĺąçgitignore,éŚĺć§čĄ ```git config --global core.excludesfile ~/.gitignore```
	* ć­¤ćśç``~/.gitconfig```äźĺćčżć ˇ(ĺ˝çśä˝ ćĺ¨ĺ ĺĽćäť¤äšćŻĺŻäťĽç)
	* ![](https://github.com/A-suozhang/MyPicBed/raw/master/img/20200108143420.png)
* çśĺçźčžć šçŽĺ˝ä¸çgitignorečŞĺ¨ĺćŹćşçgitçťĺŽ

---

* ĺçĺŻäťĽĺ¨gitconfigä¸­ĺťşçŤč´ŚćˇäżĄćŻ
	* ```git config --global user.email```

#### ć´ĺPUSH
* ĺ ä¸şĺç§ćä˝ďźćŻĺŚĺéĺ°äşäšĺçCommitďźĺŻč˝äźĺşç°```Your Repo Is Behind master/branch by 2 commit, try git pull first```ç°ĺ¨çčŽşä¸ćŻä¸č˝commitäšä¸č˝pushçďźä˝ćŻĺŚććäťŹççéčŚpush
* ```git push --force``` (č°¨ćĺ)

#### ĺźşčĄĺéçćŹ
1. éŚĺ ```git log```ćĽçĺĺ˛Commit,ćžĺ°čŞĺˇąćłčŚĺĺ°çéŁä¸ćŹĄ,čŽ°ĺ˝ä¸ćĽCOMMIT_ID
2. ć§čĄ ```git reset --hard COMMIT_ID```
  * ç¸ĺ˝äşç´ćĽĺ é¤ĺŻšĺşçcommit
3. ćčćŻ ```git revert COMMIT_ID```
  * ç¸ĺ˝äşç¨ä¸ćŹĄć°çcommitćĽĺćťĺ°äšĺçcommit

#### Commit ĺŽäşäšĺĺç°čżéčŚćšä¸Şäťäšä¸čĽż

1. ```git add $SOME_FILE```
2. ```git commit --amend --no-edit```
3. (ĺŚćĺˇ˛çťpushĺ°remoteä¸ďźéŁäšĺ```git push -f```)

#### Git AddäšĺéčŚć¤é

1. ```git reset HEAD ./XXX```
* čżć ˇĺçčŻä¸äźĺŽéćšĺćäťś,č```git checkout```ĺäźä¸˘ĺźćŹĺ°äżŽćš
* This act means **Unstage**   


#### ćľčŻć´ć°ä¸Branch

* éŚĺćć°ĺťşä¸ä¸Şćäťś```testGit.sh```
  * ```git add . ```čżĺťďźćĽç```git status```ćžç¤şć°ĺ˘äşä¸ä¸Şćäťś
  * ```git reset --file testGit.sh```äšĺ```git status```ĺç°ćžç¤şçŽĺčżćtestGit.shčżä¸Şćäťść˛Ąććäş¤
* AddhĺćĽďźCommitä¸ĺť```git commit -m "Adding testGit.sh"```,ĺć­Ľĺ°äşHEAD
* ć°ĺťşä¸ä¸Şbranch ```git checkout -b branch0```
* ćHEAD pushĺ°ć°çbranchä¸ ```git push origin branch0```
* ĺć˘ĺĺ°master branchďź ```git checkout master```
* ç´ćĽ ```git pull```ďźĺŽćäšĺĺç°ć°çćäťśtestGitć˛Ąćäş(ĺçďźĺ ä¸şmaster branchä¸ĺšść˛Ąćčżä¸Şćäťś)
* ĺć˘ĺ°```git checkout branch0```ďźçśĺ```git pull```ä˝ćŻĺ¤ąč´Ľäşďźĺ°čŻ```git pull origin branch0```ďźćäťśĺĺćĽäş
* ć§čĄ```git diff master origin```ĺŻšćŻĺ ä¸Şbranch
  * ![](https://github.com/A-suozhang/MyPicBed/raw/master/img/20191202192429.png)
* ```git branch -vv```ćĽçĺŻšćŻä¸Şbranchĺäşäťäš
  * ![](https://github.com/A-suozhang/MyPicBed/raw/master/img/20191202192500.png)
* ```git branch```ćĽçĺ˝ĺçĺćŻ(ĺ¸ŚćĺˇçćŻ)
* ```git checkout master; git merge branch0``` ĺĺšśĺćŻ
* ```git branch -d branch0```ĺ é¤ĺĺšśĺçĺćŻ

#### ĺ˝çŽĺäżŽćšçćśĺä˝żç¨rebasećĽç˛žçŽgraph

> čżéć˛Ąĺć¸ćĽďźçä¸é˘

* čżä¸Şä¸čŹčŹ - [lxfćç¨](https://www.liaoxuefeng.com/wiki/896043488029600/1216289527823648)
* [Git Book](http://gitbook.liuhui998.com/4_2.html)
  * čżä¸ŞčŽ˛çĺžć¸ćĽ
1. ĺ˝ä˝ äżŽćšäşä¸ä¸Şćäťśďźadd-commitĺŽäşćłćĺŽć¨ĺ°čżç¨ĺťďźä˝ćŻčżç¨äťĺşĺˇ˛çťč˘ŤäşşäżŽćšäş
2. čżä¸ŞćśĺćŽéćä˝ćŻĺpullä¸ćĽďźçśĺĺmergeďźä˝ćŻä˝ ä¸ćŹĄcommitçćśĺĺ°ąäźĺşç°ä¸ä¸Ş```merge comit```ćč˝pushä¸ĺť
3. ä¸äšćżäťŁďźä˝ ĺŻäťĽ```git rebase origin/XXX```
   * čżä¸Şćä˝äźćä˝ äšĺçcommitçťĺćśćďźĺšśä¸ĺ¨ć°çoriginĺé˘appendć°çäżŽćš
4. rebaseçčżç¨ä¸­äźĺşç°conflictďźč§Łĺłäšĺç¨git addďźçśĺä¸ç¨commitďźĺŻç¨```git rebase --continue``` 
5. ĺŚćä¸­éćžĺźďźĺŻäťĽ```git rebase --abort```


#### Git Stash

> ĺ˝ĺźĺäşä¸ĺďźä˝ćŻćłčŚäťremoteĺć­ĽäťŁç çćśĺ

* ĺç¨```git stash```ćĺĺŽšćĺ­ä¸ćĽ
* çśĺĺŻäťĽć­Łĺ¸¸çčżčĄpushĺpullďźcommit (stashäšĺćŻĺŻäťĽć­Łĺ¸¸çfetch mergeç)
* ```git stash pop```
* ```git stash drop```

#### Git Show

> ćłčŚćĽçćä¸ŞcommitçäżŽćšçćśĺ

* ```git log``` ćĽçcommitçĺĺ¸ĺź
  * ![](https://github.com/A-suozhang/MyPicBed/raw/master/img/20200220092339.png)
* ```git show```ćĽçćć°çcommit
* ```git show COMMIT_ID``` ćĽçćä¸ŞcommitçäżŽćš
* ```git show COMMIT_ID FILENAME``` ćĽçćä¸Şcommitçćä¸ŞćäťśçäżŽćš

#### ĺŻšäşä¸ćŻcloneä¸ćĽçć°éĄšçŽ

* ć­Łĺ¸¸çgit addäťĽĺcommit
* ```git remote add https://XXX.git```
* ```git push -u origin master```


#### Add Deletd Files while Metting "it does not exist"

* For single file, use ```git add -u $SOME_FILE```
* For the folder, use ```git rm -r --cached $SOME_FOLDER```
* Or ```git add `git ls-files --deleted` ```


#### ĺŻšäşĺ¨ä¸ĺçćŹĺ°ćĺĄĺ¨äšé´čżčĄäťĺşçĺć­Ľ

* ĺśĺŽĺć­Łĺ¸¸flowĺşćŹä¸ć ˇ,ĺŞćŻĺ°ĺćŹçremote (ĺŻäťĽç¨```git remote -v```ćĽćčż°)
   * ĺ°ĺćŹçgitćĺĄĺ¨ä¸ç(```https://github.com/A-suozhang./aw_nas```)ĺć˘ć```ztc.eva8.nics.cc:/home/zhaotianchen/code/aw_nas```
       * ĺ°ä¸é˘çčżćĽĺ ĺĽgit cloneĺłĺŻ
	   * ä¸¤čĺć ˇéčŚcommitä¸add

#### äżŽćšremoteçĺ°ĺ

* éŚĺĺŻäťĽ```git remote -v```çç°ĺ¨çremotećŻĺŞä¸Şĺ°ĺ-ćťäšćŻä¸ŞurlďźĺŻäťĽćŻĺgithubćĺĄĺ¨ďźäšĺŻäťĽćŻćŹĺ°ćĺĄĺ¨
	* ćčĺŻäťĽéčżćĺŽĺŞä¸Şremote(ä¸čŹćĽčŻ´éťčŽ¤ćŻorigin)ćĽćĽçĺŻšĺşçremoteĺ°ĺ```git remote origin```
	* ĺçpushçćśĺäšĺŻäťĽćĺŽpushĺ°ĺŞä¸Şremote
1. ```git remote set-url origin http://xxx.git``` 
2. ĺĺ é¤ĺĺťşçŤ
	* ```git remote rm origin```
	* ```git remote add origin https://```
3. äżŽćšéç˝Žćäťś
	* čżĺĽ```.git/config```

### ĺ˝ä˝ çťĺŽäşĺ¤ä¸Şremoteçćśĺ

* ĺŻäťĽç¨```git remote -v```ćĽćĽçremoteçĺĺ­ĺurl
* ćł¨ćpushçćśĺčŚćĺŽpushĺ°ĺŞä¸ä¸Şremote
* pullçćśĺĺç
	* ćł¨ćĺ˝ä˝ çbranchä¸ĺ¨masterçćśĺďźĺŚćä˝ ćłčŚĺćä¸Şremoteĺć­ĽďźéčŚĺ¨pullćśĺćĺŽremoteĺbranchçĺĺ­
	* ćŻĺŚ```git pull a-suozhang bnn```

### ĺŻšäşaddäťĽĺcommitä¸éčŚćŻä¸Şé˝addčżäťśäş

* čŻ´čľˇćĽéĺ¸¸ć­ć§ĺ°ç°ĺ¨ćććç˝
* ĺ¨git statusä¸­
	* changes not staged for commit ćŻä¸éčŚćĺ¨éčżaddĺ ĺĽç
	* ĺŞćä¸é˘çuntracked fileéčŚćĺ¨ĺ ĺĽ
* ĺ¨commitä¸­ćĺŽ-aĺ°ąĺŻäťĽä¸é˘çŹŹä¸çąťä¸­çććĺĺŽšĺ¨é¨çťcommitä¸ĺť

### [rebase](justmysocks.xyz/buy-justmysocks/?source=get)ççč§Ł

> ĺä¸ćŹĄĺç°čŞĺˇąäšĺć˛Ąććć¸ćĽďźćççćŻä¸Şĺťéź

* [ä¸ä¸Şć°çĺĺŽ˘ďźčŽ˛çć´ć¸ćĽäşä¸çš](http://jartto.wang/2018/12/11/git-rebase/)

### ä¸ćŹĄć°çĺźĺäžĺ­

* ćç°ĺ¨éčŚĺéĺ ä¸Şcommitďźĺ°ĺŽäťŹĺčľˇćĽďźĺćśčżäšé´čżäźĺ­ĺ¨ä¸ä¸ŞĺćŻçsplitĺmergeçéŽé˘
* ![](https://github.com/A-suozhang/MyPicBed/raw/master//img/445faa4e92157337e4a548f837ec475.png)
	* ĺŚĺžćç¤şďźćéčŚĺĺ°add layer2 ssčżä¸Şĺ°ćšďźĺšśä¸äżçadd final modelďźĺ°ĺśäťçcommitĺ¨é¨ĺĺšśćä¸ä¸Ş
* ```git reflog```ćč```git log```ćĽčˇĺžcommit-id
* ç¨```git rebase -i (COMMIT_ID)``` - ĺśä¸­COMMIT-IDćŻadd final modelçCOMMIT-ID
* čżĺĽäş¤äşçé˘ďź(éťčŽ¤č˛äźźćŻnanoçźčžĺ¨ďźĺŻäťĽç¨```git config --global core.editor "vim"```äżŽćšéç˝Žç¨vim)
* ĺŚĺžćç¤şäżŽćš   ![](https://github.com/A-suozhang/MyPicBed/raw/master//img/20200923151827.png)
	* ĺŽćžĺşäşĺ¨add final modelĺé˘(ĺćś)ç4ä¸Şcommit(Merge commitč˛äźźč˘ŤççĽäş)
	* ä¸é˘çćł¨éäźĺčŻä˝ ĺŚä˝ćä˝ďźćŻĺŚfçćććŻfixupďźčˇłčżä¸ćžç¤şcommitĺĺŽš,pickčĄ¨ç¤şĺ°ąćŻäżç
	* ĺ¨ćäťŹçcaseé:č˘Ťpickä¸çćŻadd controllerčżä¸ŞcommitďźĺŚćä¸äżŽćšĺĺ­çčŻä¸é˘çććçcommitĺ°ąäźč˘Ťĺćčżä¸Şcommit
* ĺŚćĺşç°äşconflictďźĺ¤§ćŚçďźďźäšĺ°ąćŻä˝ rebaseçčżä¸ŞcommitĺŚćä¸ç°ĺ¨çĺćŻĺşç°äşconflict(čŻĺŽćďźĺ ä¸şfinal modelčżä¸Şcommitč˘Ťćmergečż)ďźéŁäšĺ°ąäźéčŚćĺ¨fix
	* git addäšĺ```git rebase --continue```ĺ°ąĺĽ˝äş
* ĺ¨äťťä˝ćśĺĺç°éäşďźĺŻäťĽç´ćĽ```git rebase --abort```
* ćĺéčŚ ```git push -f``` - ć˛Ąćĺĺ¤´čˇŻ

* **ćťäšďźgit rebaseĺ°ąćŻĺ°ĺ¨ćĺcommitäšĺçććcommitďźĺćä¸ä¸Şcommit,appendĺ¨ĺŽĺé˘**
	* ä¸äšĺç­çş§ç(ä¸ĺçĺćŻĺşĺťç)ďźé˝čŽ¤ä¸şĺ¨ĺśäšĺ

---

* **ç°ĺ¨ĺŽĺ¨çä¸ććä¸é˘čŽ°çćŻäťäšĺä¸čĽż**
* ĺcheckoutĺ°ćä¸ŞbranchďźćĺśäťbranchçĺĺŽšçťrebasečżćĽ
* ![image](https://user-images.githubusercontent.com/25324931/92607352-9c7c1980-f2e6-11ea-9b5e-9556c96bec9d.png)

### çćŹĺéćśĺçä¸ä¸Şć°çĺźĺćĄäž

* ćč ˘çćĺŻšćä¸Şĺˇ˛çťćäş¤čżĺťçcommitčżčĄäşäżŽćšďźçśĺä˝żç¨äşamendďźä˝ćŻçąäşäżŽćšçĺĺŽšä¸amendçčżä¸Şcommitĺ˛çŞäşďźĺŻźč´ć ćłpushďźćpullä¸ćĽäšĺĺäšąäş
1. ćäťŹéŚĺéčŚĺĺ°ććĺ¸ćçcommitçćäťśçśćďźĺ ä¸şććŹĺ°çćäťśĺ ä¸şpullçautomergeç°ĺ¨ćŻä¸çćˇˇäšą ```git reset --hard $last_commit_id```
2. çśĺćäťŹčŚčŽŠć ĺĺ°ććĺä¸ćŹĄĺťéźçcommitäšĺççść ```git reset --soft $commit_before_amend``` , ä¸ĺŽčŚç¨softĺ ä¸şčżć ˇä¸äźĺ˝ąĺĺ°ćŹĺ°çćäťś
3. çśĺĺťşçŤä¸ä¸Şć°çcommitĺ°ąĺŻäťĽäş

---

### ĺźşĺśĺéçćŹ

> ććč§ćĺĽ˝ĺĺ¨äťäšĺ°ćšĺˇ˛çťčŽ°čżčżä¸Şä¸ćŹĄäş

* git logćĽçCOMMIT_ID
* ```git reset --hard COMMIT_ID```
* ĺŚćä˝żç¨ ```git checkout COMMIT_ID```äźĺşç°HEAD Detachçç°čąĄďźĺŻźč´ä¸ĺ¨äťťä˝ä¸ä¸Şbranchä¸é˘

### ĺźşĺśä¸remote sync

* ĺgit fetch origin $branch
* ```git reset --hard origin $branch```

### Git diff

* ĺŚćgit addäšĺä˝żç¨git diffćŻçä¸ĺ°ä¸čĽżçďźĺŚććčżćłčŚĺŻšćŻ, ç¨ ```git reset HEAD ./XXX```ĺťunstageďźĺžč ˘
* ä˝żç¨```git diff --cached```

### Git Patch

* ä˝żç¨`git diff $FILE > patch_0`
* ĺ°patchćˇč´ĺ°ĺŤçĺ°ćšĺšśä¸apply `git apply patch_0` - ćł¨ćç¸ĺŻščˇŻĺžčŚĺŻšé˝

### ĺśĺ°ĺç°čŞĺˇąçgitçŞçśTLS Tunnel Errorďźä¸č˝cloneä¸čĽżäş

* ĺŻč˝ćŻäťŁçćäşďźć§čĄ```git config --global --unset http.proxy```

## 如何正确的设置Git的remoteforward

* 在登录的时候执行 ssh -R 10809:localhost:10809:xxx
* 然后登录之后可以查看一下lsof  -i :10809端口看看有没有成功建立起来

![](https://github.com/A-suozhang/MyPicBed/raw/master//img/bc00e5413ae8f120870ef285829e5c6.png)



## Refs
* [ĺ¸¸č§Trouble Shooting](https://blog.csdn.net/qq_15437629/article/details/78761459)
* [ćä˝ çłťçťĺ­Śäš Git](https://www.jianshu.com/p/fe038a97bb3c)
* [git-guide](http://rogerdudler.github.io/git-guide/index.zh.html)
* [ä¸ä¸ŞgitçĽäšçćĺ­Ś](https://zhuanlan.zhihu.com/p/96631135) 
* [ä¸ä¸Şgitĺ­Śäš çŹčŽ°](https://www.jianshu.com/p/9eaf603b4796)
* [Git Community Book](http://gitbook.liuhui998.com/index.html)
* [Gitĺçäťçť](https://www.zhihu.com/question/20866683/answer/1078084293)
* [Ohshit-Git](ohshitgit.com)
* [Gitmoji](https://gitmoji.carloscuesta.me/)
* čŻĺżć¨čđ[Visualized Git Tutorial](https://dev.to/lydiahallie/cs-visualized-useful-git-commands-37p1)
