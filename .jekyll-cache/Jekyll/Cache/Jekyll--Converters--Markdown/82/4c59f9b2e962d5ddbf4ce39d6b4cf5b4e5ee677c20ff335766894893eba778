I"­°<h1 id="dpu-on-zc102">DPU On ZC102</h1>
<ul>
  <li>å°è¯•åœ¨ZC102 Evaluation Boardä¸Šçƒ§å½•Linuxç³»ç»Ÿçš„è¡€æ³ªæ–‡æ¡£</li>
  <li>æ‘˜è¦
    <ul>
      <li>ZC102 Evaluation Board
        <ul>
          <li>æ ¸å¿ƒèŠ¯ç‰‡ZU9</li>
          <li><img src="pics/board.jpg" alt="" /></li>
          <li>é€šè¿‡SDå¡è¿›è¡Œå¯åŠ¨</li>
          <li>å¤–æ¥æ˜¾ç¤ºå™¨å’Œé¼ æ ‡é”®ç›˜è‡ªå¤‡â€¦</li>
        </ul>
      </li>
      <li>å¼€å‘ç¯å¢ƒ
        <ul>
          <li>Vivado 2019.1 (ç‰ˆæœ¬é™å®š)</li>
          <li>petalinux 2019</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="environment">Environment</h2>

<h3 id="å®‰è£…vivado">å®‰è£…Vivado</h3>
<ol>
  <li>ä¸‹è½½æ‰€éœ€ç‰ˆæœ¬çš„Vivadoå®‰è£…æ–‡ä»¶ã€‚å®˜æ–¹ä¸‹è½½åœ°å€: <a href="https://china.xilinx.com/support/download.html">https://china.xilinx.com/support/download.html</a></li>
  <li>è·å–license(è¯·å„å‡­æœ¬äº‹)ã€‚å¦‚æœä»å®˜æ–¹è´­ä¹°äº†æ¿å¡ï¼Œå®˜æ–¹é€šå¸¸ä¼šæä¾›ä¸€ä»½licenseã€‚</li>
  <li>è¿è¡Œå®‰è£…ç¨‹åºï¼Œå®‰è£…è¿‡ç¨‹ä¸­æ ¹æ®éœ€è¦é€‰æ‹©ç‰ˆæœ¬ä»¥åŠæ‰€éœ€ç»„ä»¶(åœ¨ç¡¬ç›˜ç©ºé—´ä¸ç´§ç¼ºçš„æƒ…å†µä¸‹ï¼Œå»ºè®®é€‰æ‹©System Editionç‰ˆæœ¬ï¼Œç»„ä»¶ç”¨é»˜è®¤é€‰é¡¹å³å¯)ã€‚å®‰è£…æ—¶é—´è¾ƒé•¿ã€‚</li>
  <li>å®‰è£…å®Œæˆåï¼Œä¼šè‡ªåŠ¨è¿›å…¥Vivado License Manager(å¦‚æœä¸å°å¿ƒå…³æ‰äº†ï¼Œå¯ä»¥ä¹‹åæ‰“å¼€vivadoï¼Œé€šè¿‡Help-&gt;License Managerè¿›å…¥)ã€‚é€‰æ‹©Load Licenseé¡¹ï¼Œé€‰æ‹©licenseæ–‡ä»¶ã€‚ä¹‹åé€‰æ‹©View License Statusï¼Œçœ‹åˆ°å¯ç”¨çš„IPåˆ—è¡¨ï¼Œå³è¡¨ç¤ºåŠ è½½æˆåŠŸã€‚</li>
  <li>åœ¨å‘½ä»¤è¡Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†vivadoæ·»åŠ åˆ°è·¯å¾„ä¸­ï¼ŒåŒæ—¶å»ºè®®å°†è¯¥å‘½ä»¤æ·»åŠ åˆ°~/.bashrcæ–‡ä»¶ä¸­ä»¥ä¾¿å‘½ä»¤è¡Œå¯åŠ¨æ—¶è‡ªåŠ¨æ·»åŠ è¯¥è·¯å¾„ï¼š
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">source</span> &lt;path-to-vivado&gt;/settings64.sh
</code></pre></div>    </div>
  </li>
  <li>åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤å¼€å¯Vivado:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vivado &amp;
</code></pre></div>    </div>
  </li>
</ol>

<ul>
  <li>æ³¨æ„ï¼šä¸åŒç‰ˆæœ¬çš„Vivadoå¹¶ä¸å†²çªï¼Œåªéœ€è¦è®¾ç½®ç›¸åº”çš„è·¯å¾„å³å¯å®Œæˆåˆ‡æ¢ã€‚å…·æœ‰å……è¶³ç©ºé—´çš„æœåŠ¡å™¨å¯ä»¥è€ƒè™‘ä¿ç•™å¤šä¸ªç‰ˆæœ¬çš„Vivadoæ–¹ä¾¿å…¼å®¹ä¸åŒçš„å·¥ç¨‹ã€‚</li>
</ul>

<h3 id="å®‰è£…petalinux">å®‰è£…petalinux</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2019_1/ug1144-petalinux-tools-reference-guide.pdf">UG1144</a></p>
<ol>
  <li>ä¸‹è½½æ‰€éœ€ç‰ˆæœ¬çš„petalinuxã€‚petalinuxçš„ç‰ˆæœ¬éœ€è¦å’ŒVivadoçš„ç‰ˆæœ¬å¯¹åº”ã€‚å®˜æ–¹ä¸‹è½½åœ°å€: <a href="https://china.xilinx.com/support/download/index.html/content/xilinx/zh/downloadNav/embedded-design-tools.html">https://china.xilinx.com/support/download/index.html/content/xilinx/zh/downloadNav/embedded-design-tools.html</a></li>
  <li>æ ¹æ®UG1144ä¸­çš„è¯´æ˜å®‰è£…æ‰€éœ€çš„åº“ã€‚æ‰‹å†Œä¸­ä¼šç»™å‡ºå¯¹åº”æ“ä½œç³»ç»Ÿæ‰€éœ€è¦è¿è¡Œçš„å‘½ä»¤è¡Œä»£ç ã€‚ä¾‹å¦‚å¯¹äºubuntuï¼š
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> gcc git make net-tools libncurses5-dev tftpd zlib1g-dev libssl-dev flex bison libselinux1 gnupg wget diffstat chrpath socat xterm autoconf libtool <span class="nb">tar </span>unzip texinfo zlib1g-dev gcc-multilib build-essential <span class="nt">-dev</span> zlib1g:i386 screen pax <span class="nb">gzip</span>
</code></pre></div>    </div>
    <ul>
      <li>è¿™é‡Œä¸ªäººè¿˜éœ€è¦å†å®‰è£…ä¸€ä¸ªgawkåº“</li>
    </ul>
    <ul>
      <li>å¦åˆ™è¯»å–ä¸‹è½½çš„installæ–‡ä»¶æ—¶ä¼šå‡ºé”™
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Bad Address
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>ç›´æ¥è¿è¡Œä¸‹è½½åçš„æ–‡ä»¶ï¼Œåœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šå®‰è£…ä½ç½®ã€‚æ³¨æ„ï¼šä¸èƒ½ä½¿ç”¨sudoæƒé™æˆ–ä»¥rootèº«ä»½å®‰è£…ï¼›å®‰è£…çš„ä½ç½®éœ€è¦åœ¨å½“å‰ç”¨æˆ·çš„æƒé™èŒƒå›´å†…ã€‚
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./petalinux-v<span class="o">{</span>xxxx.x<span class="o">}</span><span class="nt">-final-installer</span>.run &lt;install-path&gt;
</code></pre></div>    </div>
    <ul>
      <li>å¯åŠ¨å®‰è£…æ–‡ä»¶æ—¶ä¼šæŠ¥Warning
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> WARNING: No tftp server found - please refer to "PetaLinux SDK Installation Guide" for its impact and solution
</code></pre></div>        </div>
      </li>
    </ul>
    <ul>
      <li>æŸ¥é˜…DataSheet(UG1144)å,æœ¬æœºæ²¡æœ‰å¼€å¯tftpæœåŠ¡,ä¼šå½±å“å°†linuxé•œåƒçƒ§å†™åˆ°å¼€å‘æ¿,è¿™é‡Œæš‚æ—¶å¯ä»¥ä¸ç”¨è€ƒè™‘
        <ul>
          <li>ç”±äºæˆ‘ä»¬é‡‡ç”¨çš„SDå¡å¯åŠ¨,è€Œä¸æ˜¯é€šè¿‡TFTPè¿›è¡Œçƒ§å†™,æ‰€ä»¥å…³äºè¿™ä¸ªçš„warningå¯ä»¥ä¸€å¾‹æ— è§†</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<ul>
  <li>è¿™é‡Œå¯èƒ½çš„å‡ºé”™åŸºæœ¬éƒ½æ˜¯æƒé™é—®é¢˜
    <ul>
      <li>æ¯”å¦‚å®‰è£…åˆ°/optç›®å½•(å¦‚UG1144)ç”¨æˆ·å¯èƒ½æ²¡æœ‰æƒé™(å…¶å®æˆ‘æ˜¯å°†/optç›®å½•ç›´æ¥chmodæˆ777çš„(æœ‰ä¸€ç‚¹å°å±é™©),è¿™æ ·å®‰è£…æ²¡æœ‰é—®é¢˜)</li>
      <li>è¿˜æœ‰å®‰è£…æ–‡ä»¶(install script)ä¸èƒ½è®¾ç½®ä¸º775æƒé™(UG1144è¯´è¿™æ ·çš„è¯bitBakeä¼šå‡ºé—®é¢˜),æˆ‘ç›®å‰æ˜¯è®¾ç½®ä¸º777</li>
      <li>ä¸èƒ½ç”¨ROOTå®‰è£…!</li>
    </ul>
  </li>
</ul>

<ol>
  <li>åœ¨å‘½ä»¤è¡Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†petalinuxæ·»åŠ åˆ°è·¯å¾„ä¸­ï¼ŒåŒæ—¶å»ºè®®å°†è¯¥å‘½ä»¤æ·»åŠ åˆ°~/.bashrcæ–‡ä»¶ä¸­ä»¥ä¾¿å‘½ä»¤è¡Œå¯åŠ¨æ—¶è‡ªåŠ¨æ·»åŠ è¯¥è·¯å¾„ï¼š
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">source</span> &lt;path-to-petalinux&gt;/settings.sh
</code></pre></div>    </div>
    <p>è™½ç„¶ä¸æ˜¯ä¸€å®šè¦åŠ ,å»ºè®®æŠŠè¿™ä¸ªä¹ŸåŠ ä¸Š(åé¢å¦‚æœé‡åˆ°äº†æ‰¾ä¸åˆ°sourcing bitbake sourceä¸€å¹´çš„æ—¶å€™,æœ‰äººç»™çš„è§£å†³æ–¹æ¡ˆæ˜¯sourceä¸€ä¸‹è¿™ä¸ª(è™½ç„¶æˆ‘ä¹Ÿä¸å¤ªç¡®å®šè¿™ä¸ªæœ‰æ²¡æœ‰ç”¨,å¤šsourceä¸€ä¸ªä¹ŸèŠ±ä¸äº†å¤šå°‘æ—¶é—´))</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">source</span> /opt/petalinux/components/yocto/source/aarch64/environment-setup-aarch64-xilinx-linux
</code></pre></div>    </div>
    <ul>
      <li>å°†è¯¥æ–‡ä»¶æ·»åŠ åˆ°.bashrcæ—¶å¯èƒ½ä¼šå¯¼è‡´å¼€å¯bashrcè¾ƒæ…¢â€¦å±äºæ­£å¸¸ç°è±¡(å¤§æ¦‚)</li>
    </ul>
  </li>
  <li>è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯é…ç½®æ˜¯å¦æˆåŠŸï¼Œæ­£ç¡®æ—¶è¿”å›å®‰è£…è·¯å¾„ï¼š
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="nv">$PETALINUX</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="è¾…åŠ©è½¯ä»¶åŠé©±åŠ¨">è¾…åŠ©è½¯ä»¶åŠé©±åŠ¨</h3>
<ol>
  <li><a href="https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers">CP210x USBè½¬ä¸²å£</a>ï¼šç”¨äºé€šè¿‡ä¸²å£è¿æ¥ZCU102å¼€å‘æ¿ã€‚</li>
  <li><a href="https://www.balena.io/etcher/">SDå¡é•œåƒçƒ§å†™è½¯ä»¶(Windows)</a>ï¼šçƒ§å†™å®Œæ•´imgæ ¼å¼é•œåƒè‡³SDå¡ã€‚</li>
  <li>SDå¡åˆ†åŒºè½¯ä»¶(Linux)ï¼šSDå¡æ ¼å¼åŒ–åŠåˆ†åŒºã€‚å¯ä»¥ç›´æ¥å®‰è£…ï¼š
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">sudo </span>apt-get <span class="nb">install </span>gparted
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="vivado-set">Vivado Set</h2>
<ul>
  <li><strong>æ³¨æ„</strong>ï¼šä»¥ä¸‹éƒ¨åˆ†ç›¸å½“äºå¤ç°äº†Xilinx-DPU_TRDä¸­çš„æ“ä½œï¼Œå¯ä»¥ç›´æ¥åœ¨å®˜ç½‘ä¸Šä¸‹è½½trdï¼Œtclè„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆé…ç½®ï¼Œå¯ä»¥ç›´æ¥å¼€å§‹ç»¼åˆå®ç°
    <ol>
      <li>éœ€è¦åœ¨Vivado(2019.1)ä¸‹å»ºç«‹å·¥ç¨‹</li>
      <li>é€‰æ‹© Board(æ³¨æ„ä¸æ˜¯é€‰èŠ¯ç‰‡,è€Œæ˜¯é€‰board,board Ver1.0,ver 3.3) -&gt; ZC102</li>
      <li>éœ€è¦é¦–å…ˆåœ¨IP Catalogä¸­å¯¼å…¥DPUçš„IP</li>
    </ol>
    <ul>
      <li>DPUçš„IPä½äº:
        <ol>
          <li>å»ºç«‹Block Design (ä»¥ä¸‹æœ‰è¶…çº§å¤šçš„å·¥ä½œ,å…¶å®å¦‚æœæˆ‘çš„æµ‹è¯•è¿‡äº†å¯ä»¥å¯¼å‡ºä¸€ä¸ªtcl)</li>
        </ol>
      </li>
      <li>æœ‰ä»¥ä¸‹å‡ éƒ¨åˆ†æ¨¡å—éœ€è¦è‡ªè¡Œé…ç½®
        <ul>
          <li>Zynq UltraScale IP Core
            <ul>
              <li>é¦–å…ˆæ·»åŠ IPæ ¸,å¹¶ä¸”Run Block Automation(è®©Vivadoå¸®ä½ åšä¸€äº›åˆå§‹åŒ–)</li>
              <li><img src="pics/zynq0.png" alt="" /></li>
              <li>ç„¶ååšä¸€äº›é…ç½®</li>
              <li><img src="pics/zynq1.png" alt="" /></li>
              <li><img src="pics/zynq2.png" alt="" /></li>
              <li><img src="pics/zynq3.png" alt="" /></li>
              <li>æœ€åé…ç½®å®Œçš„åº”è¯¥å¦‚ä»¥ä¸‹æ‰€ç¤º</li>
              <li><img src="pics/zynq4.png" alt="" /></li>
              <li><img src="pics/zynq5.png" alt="" /></li>
              <li>æ³¨æ„æœ‰æ²¡æœ‰å¤šPortå°‘Port,ä¸ç„¶ä¹‹åè¿çº¿æ—¶ä¼šä¸å¥½è¿</li>
            </ul>
          </li>
          <li>DPU IP Core
            <ul>
              <li>:cry:  æˆ‘çš„DPU IPæ ¸é‡Œé¢æ˜¾ç¤ºæ˜¯8hæ—¶é™,è¿‡äº†ä¹‹åå¯èƒ½éœ€è¦regenerate(å¹¶æ— å¤§ç¢)</li>
              <li>æŒ‰ç…§ä¸‹å›¾é…ç½®DPUæ ¸</li>
              <li><img src="pics/DPU0.png" alt="" /></li>
              <li><img src="pics/DPU1.png" alt="" /></li>
              <li><img src="pics/DPU2.png" alt="" /></li>
              <li>æœ€ç»ˆç»“æœå¦‚ä¸‹</li>
              <li><img src="pics/DPU3.png" alt="" /></li>
            </ul>
          </li>
          <li>Clock Part
            <ul>
              <li>ç”±ä¸€ä¸ªclk_wizardå’Œä¸¤ä¸ªsystem resetæ„æˆ,åˆ†åˆ«ç”¨æ¥ç”ŸæˆDPUæ‰€éœ€è¦çš„DPUé€»è¾‘æ—¶é’Ÿ(clk_dpu)å’ŒDSPæ—¶é’Ÿ(clk_dsp)
                <ul>
                  <li>clk_dsp: 650M é‡‡ç”¨äº†DDRæŠ€æœ¯,è·å¾—ä¸¤å€ç³»ç»Ÿæ—¶é’Ÿçš„DSPæ—¶é’Ÿ</li>
                  <li>clk_dpu: ç³»ç»Ÿæ—¶é’Ÿ 325M</li>
                  <li>(Xilinxçš„å·¥ç¨‹å¸ˆçœŸçš„:cow::beer:,èµ„æºç”¨æ»¡è¿˜èƒ½è·‘åˆ°325M)</li>
                  <li>ä¸‹é¢æ˜¯é…ç½®:</li>
                  <li><img src="pics/clk0.png" alt="" /></li>
                  <li><img src="pics/clk1.png" alt="" /></li>
                  <li><img src="pics/clk2.png" alt="" /> è¿™é‡Œè®°å¾—è¦(æ‹–ä¸‹å»)æŠŠrst typeé€‰æˆLOW</li>
                  <li><img src="pics/clk3.png" alt="" /> è¿™é‡Œä¹Ÿè¦æŠŠä¸¤ä¸ªrsté€‰æˆ0,æˆ‘å½“æ—¶è¢«å›ºå®šåœ¨1ä¸Š,é‡å¯äº†ä¸€ä¸‹Vivadoå°±å¥½äº†</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>Interrupt
            <ul>
              <li>å°±æ˜¯ä¸­æ–­ä¿¡å·çš„concatâ€¦</li>
              <li><img src="pics/intr0.png" alt="" /> å»ºç«‹ä¸€ä¸ªconstant IP</li>
              <li><img src="pics/intr1.png" alt="" /></li>
              <li><img src="pics/intr2.png" alt="" /></li>
            </ul>
          </li>
          <li>AXIéƒ¨åˆ†
            <ul>
              <li>PS(Zynq)ä¸PL(DPU)é€šè¿‡AXIé€šä¿¡</li>
              <li><img src="pics/axi.png" alt="" /> å°±æ˜¯ä¾‹åŒ–ä¸€ä¸ªAXI Interconnect,ç„¶åè¿çº¿</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>DPUéƒ¨åˆ†æ€»æ¡†å›¾:
        <ul>
          <li><img src="pics/DPU_all.png" alt="" /></li>
        </ul>
      </li>
      <li>å®Œæˆäº†ä»¥ä¸Šæ­¥éª¤ä¹‹å,è¿˜éœ€è¦åœ¨Address Editor(åœ¨block designçš„å³è¾¹)é‚£ä¸€æ ,é…ç½®ä¸€ä¸‹reg0çš„åœ°å€
        <ul>
          <li><img src="pics/addr_edit0.png" alt="" /></li>
          <li><img src="pics/addr_edit1.png" alt="" /></li>
          <li>(å¦‚æœè¿™ä¸€æ­¥ä¸åšçš„è¯ä¼šæŠ¥è¶…å¤šçš„errorå’Œcritical warningâ€¦)</li>
        </ul>
      </li>
      <li><em>å¦‚æœé‡‡ç”¨äº†trdå¯ä»¥ç›´æ¥ä»è¿™é‡Œå¼€å§‹</em>
        <ol>
          <li>ç„¶åå¼€å§‹ç´§å¼ åˆºæ¿€çš„Synth(30min) - Impl(1h) - Bitstream(&lt;30min)å§!</li>
        </ol>
      </li>
      <li>ä¸å‡ºæ„å¤–çš„è¯ä¼šæŠ¥å‡ ç™¾ä¸ªwarinng,ä½†æ˜¯æ²¡æœ‰critical warningå°±å¥½â€¦</li>
      <li><img src="pics/synth0.png" alt="" /></li>
      <li><img src="pics/synth1.png" alt="" />
        <ol>
          <li>File - Export Hardware - (å‹¾é€‰include bitstream)</li>
        </ol>
      </li>
      <li>å¯¼å‡ºæœ€åçš„ .hdfæ–‡ä»¶ (ä¸Šé¢è¿™ä¹ˆå¤šæ­¥å°±æ˜¯ä¸ºäº†ç”Ÿæˆè¿™ä¹ˆä¸€ä¸ª.hdfæ–‡ä»¶,åŒ…å«äº†ç¡¬ä»¶ä¿¡æ¯å’Œbitæ–‡ä»¶)</li>
    </ul>
  </li>
</ul>

<h2 id="pentalinux-set">PentaLinux Set</h2>

<ul>
  <li>å‰é¢é…ç½®çš„æ—¶å€™æœ‰è®²è¿‡,ä½¿ç”¨pentalinuxéœ€è¦sourceä¸€ä¸ªshæ–‡ä»¶,å¯ä»¥æ”¾åœ¨~/.bashrcé‡Œé¢
    <ul>
      <li>(ä½†æ˜¯ç”±äºæ‰§è¡Œæ—¶é—´ç¨å¾®æœ‰ä¸€äº›é•¿,æ¯æ¬¡å¼€bashéƒ½ä¼šå¡ä¸€ä¸‹å­,æ‰€ä»¥æˆ‘ä¸ªäººè¿˜æ˜¯aliasäº†ä¸€ä¸ªæŒ‡ä»¤,æœ‰éœ€è¦çš„æ—¶å€™å†ç”¨)
        <ul>
          <li>å¯ä»¥æŠŠpetalinux shæœ€åæ£€æŸ¥ç¯å¢ƒçš„ä»£ç åˆ é™¤ï¼Œè¿™æ ·å°±å¿«äº†</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>è¿™ä¸€æ­¥çš„ä¸»è¦ç›®æ ‡æ˜¯äº§ç”Ÿç³»ç»Ÿé•œåƒ(åŒ…æ‹¬image.ubå’ŒBOOT.bin)çƒ§å†™åˆ°SDå¡ä¸­è®©æ¿å¡å¯åŠ¨
    <ul>
      <li>Petalinux å¯ä»¥äº§ç”ŸRootfs,ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä¸ç”¨å®ƒçš„Rootfs</li>
    </ul>
  </li>
</ul>

<ol>
  <li>å»ºç«‹å·¥ç¨‹
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>petalinux-create <span class="nt">-t</span> project <span class="nt">--name</span> &lt;project-name&gt; <span class="nt">--template</span> zynqMP
</code></pre></div>    </div>
    <p>å¦‚æœæœ‰æ¿å¡çš„BSPï¼Œå¯ä»¥é‡‡ç”¨BSPå»ºç«‹å·¥ç¨‹(ä¼šçœå¾ˆå¤šé…ç½®)</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>petalinux-create <span class="nt">-t</span> project <span class="nt">-s</span> &lt;path-to-bsp&gt;
</code></pre></div>    </div>
    <p>å·¥ç¨‹å»ºç«‹ä¹‹åï¼Œä¼šåœ¨å½“å‰è·¯å¾„ä¸‹å»ºç«‹ä¸€ä¸ªåŒ…å«å·¥ç¨‹çš„æ–‡ä»¶å¤¹ã€‚</p>
  </li>
  <li>é…ç½®ç¡¬ä»¶åŠkernelï¼ˆå¼€å‘æ¿å¯ä»¥é€‰ç”¨é»˜è®¤é€‰é¡¹ä¸é…ç½®ï¼‰
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> &lt;path-to-project&gt;
petalinux-config <span class="nt">--get-hw-descroption</span> &lt;path-to-folder-of-hdf&gt;
</code></pre></div>    </div>
    <ul>
      <li>petalinuxé»˜è®¤çš„å¯åŠ¨æ–¹å¼æ˜¯initramfsï¼Œå³å°†æ–‡ä»¶ç³»ç»ŸåŠ è½½åˆ°å†…å­˜ä¸­è¿è¡Œï¼Œè€Œä¸ä¼šä»SDå¡ä¸­è¯»å–æ–‡ä»¶ç³»ç»Ÿã€‚å› æ­¤éœ€è¦å•ç‹¬é…ç½®å¯åŠ¨æ–¹å¼ã€‚è¿è¡Œä¸Šé¢ä¸€æ¡æŒ‡ä»¤åä¼šé»˜è®¤è¿›å…¥é…ç½®ç•Œé¢ï¼Œéœ€è¦é…ç½®ä»¥ä¸‹å†…å®¹ï¼š</li>
      <li>å–æ¶ˆå‹¾é€‰<code class="highlighter-rouge">DTG Settings-&gt;Kernel Bootargs-&gt;generate boot args automatically</code></li>
      <li>è®¾ç½®boot argsä¸ºï¼š<code class="highlighter-rouge">console=ttyPS0,115200 root=/dev/mmcblk0p2 rw earlyprintk rootfstype=ext4 rootwait</code>
        <ul>
          <li>bootargæ˜¯Linuxä¸­éå¸¸å…³é”®çš„ä¸€ä¸ªç¯å¢ƒå˜é‡</li>
          <li>ä¸€äº›å¸¸ç”¨çš„å‚æ•°
            <ul>
              <li>root æŒ‡å®šrootfsçš„ä½ç½®</li>
              <li>rootfstype</li>
              <li>console
                <ul>
                  <li>=tty è™šæ‹Ÿä¸²å£è®¾å¤‡</li>
                </ul>
              </li>
              <li>mem æŒ‡å®šå†…å­˜çš„å¤§å°</li>
              <li>ramdisk(<a href="https://www.cnblogs.com/cornflower/archive/2010/03/27/1698279.html">è¿™ç¯‡åšæ–‡</a>è¡¨ç¤ºæœ€å¥½ç”¨ramdisk_size) è¡¨ç¤ºramdiskçš„å¤§å°ï¼Œé»˜è®¤ä¸º4M</li>
              <li>initrd/noinitrd (å¦‚æœä¸ä½¿ç”¨ramdiskå¯åŠ¨ç³»ç»Ÿï¼Œéœ€è¦noinitrdè¿™ä¸ªå‚æ•°)</li>
              <li>ip ç³»ç»Ÿå¯åŠ¨ä¹‹åçš„ç½‘å¡åœ°å€(å¦‚æœè¦ä½¿ç”¨åŸºäºnfsçš„æ–‡ä»¶ç³»ç»Ÿï¼Œéœ€è¦æ­¤å‚æ•°)</li>
              <li>Example
                <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  setenv bootargs â€˜initrd=0x32000000,0xa00000 root=/dev/ram0 console=ttySAC0 mem=64M init=/linuxrcâ€™
</code></pre></div>                </div>
              </li>
            </ul>
          </li>
          <li>è§£é‡Šä¸€ä¸‹ä¸Šé¢çš„Bootarg
            <ul>
              <li>console ä½¿ç”¨è™šæ‹Ÿä¸²å£tty0</li>
              <li>root=/dev/mmcblk0p2 SDå¡çš„ç¬¬äºŒåˆ†åŒº</li>
              <li>rw printk LOGè¾“å‡º</li>
              <li>rootwait (rootdelay)ç”¨äºbootæ—¶å€™æ–‡ä»¶ç³»ç»Ÿå¯èƒ½è¿˜æ²¡æœ‰å‡†å¤‡å¥½çš„æƒ…å†µ</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <p>è®¾ç½®<code class="highlighter-rouge">Image Packaging Configurations-&gt;Root filesystem type</code>ä¸º<code class="highlighter-rouge">SD Card</code></p>
      </li>
      <li>é…ç½®å®Œæˆä¹‹å
éœ€è¦æ›´æ–°ç°æœ‰çš„bootloaderï¼Œä¿è¯bootloaderæœ€æ–°
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> petalinux-build -c bootloader -x distclean
</code></pre></div>        </div>
      </li>
      <li>å¦‚æœéœ€è¦å¯¹å†…æ ¸è¿›è¡Œå…¶ä»–é…ç½®ï¼Œè¯·æ ¹æ®<a href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2019_1/ug1144-petalinux-tools-reference-guide.pdf">UG1144</a>æ‰§è¡Œã€‚</li>
    </ul>
  </li>
  <li>é…ç½®Kernel
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>petalinux-config <span class="nt">-c</span> kernel
</code></pre></div>    </div>
    <p>ç„¶åéœ€è¦é…ç½®ä¸€ä¸‡ä¸ªä¸œè¥¿ï¼ˆå¸¦â€//â€çš„åº”è¯¥å·²ç»è¢«BSPè‡ªåŠ¨é…ç½®å¥½äº†ï¼‰</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Following are some of the mandatory configurations needed for successful booting of Ubuntu Desktop.
    Disable initramfs in kernel configuration GUI at â€˜General setup -&gt; Initial RAM file system and RAM disk (initramfs/initrd) supportâ€™
 Following settings are required to enable Input device, multimedia and USB related settings
    Device Drivers-&gt;Input device support-&gt;Event interfaceâ€™ã€€//
    Device Drivers-&gt;Input device support-&gt;Keyboardsâ€™        //
    Device Drivers-&gt;Input device support-&gt;Mouse interfaceâ€™
    Device Drivers-&gt;Multimedia support-&gt;Media USB Adapters-&gt;USB Video Class (UVC)    //
    Device Drivers-&gt;Multimedia support-&gt;Cameras/video grabbers supportâ€™              //
    Device Drivers-&gt;Multimedia support-&gt;V4L platform devices                         //
    Device Drivers-&gt;USB support and enable all required classes (Except For Disable External Hub)
    Device Drivers-&gt;HID support-&gt;Generic HID driver                                      //
    Device Drivers-&gt;HID support-&gt;USB HID support-&gt;USB HID transport layer                //
 Disabling the PMBUS PMIC so that power demo can use them without any issues 
    Device Drivers-&gt;Hardware Monitoring support-&gt;PMBus support-&gt;Maxim MAX20751â€™  (Careful here is disable)
    Enable the PHY settings
    Device Drivers-&gt;PHY Subsystemâ€™
    Device Drivers-&gt;PHY Subsystem-&gt;Xilinx ZynqMP PHY driverâ€™
    Disable the PCI settings
    Bus Support-&gt;PCI supportâ€™ This needs to be disabled for this version
    Enable the sound related settings:
    Device Drivers-&gt;Sound card supportâ€™
    Device Drivers-&gt;Sound card support-&gt;Advanced Linux Sound Architectureâ€™ enabling ALSA support
    Kernel hacking &gt; Tracers &gt; Kernel Function Tracer
 Save and Exit the kernel configuration.
</code></pre></div>    </div>

    <ul>
      <li>rootfsåŒç† (è¿™é‡Œconfigçš„æ˜¯petalinuxç”Ÿæˆrootfsï¼Œä¸æ˜¯æˆ‘ä»¬æœ€åç”¨çš„é‚£ä¸ªï¼Œå½“ç„¶å…¶å®ä¹Ÿå¯ä»¥ç”¨petalinuxç”Ÿæˆçš„rootfs,åŒæ ·ä¼šç”Ÿæˆåœ¨image/linuxé‡Œé¢)
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>petalinux-config <span class="nt">-c</span> rootfs
</code></pre></div>        </div>
        <ul>
          <li>// è¿™è¾¹petalinux-configæ—¶å€™,æœ‰æ—¶å€™å¯èƒ½ä¼šå¡åœ¨(initializingâ€¦æˆ–è€…æ˜¯ss check),åŸå› æ˜¯æ²¡æœ‰è”ç½‘â€¦
            <ul>
              <li>è§£å†³æ–¹æ³•: è¾“å…¥ (å•çº¯çš„configæ˜¯å¯ä»¥configçš„,å¸¦åˆ«çš„æŒ‡ä»¤çš„å¯èƒ½ä¼šå¡ä½)
                <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  petalinux-config
</code></pre></div>                </div>
                <p>å‘ä¸‹æ»šåŠ¨,åˆ°â€Yocto Settingâ€,å–æ¶ˆå‹¾é€‰ä¸€ä¸ªâ€Enable sstate feed from internetâ€(å…·ä½“å«å•¥è®°ä¸å¤ªæ¸…æ¥šäº†,æ€»ä¹‹å°±æ˜¯ç¦æ­¢è”ç½‘æ ¡éªŒ)
  ç„¶åæ²¡æœ‰ç½‘ä¹Ÿå¯ä»¥æ­£å¸¸buildå’Œconfigå•¦!</p>
              </li>
            </ul>
          </li>
          <li>// è¿™è¾¹å¦‚æœå¡åœ¨Sourcing Bitbake,å‚è€ƒä¸Šé¢å®‰è£…æµç¨‹ä¸­çš„
            <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">source</span> /opt/petalinux/components/yocto/source/aarch64/environment-setup-aarch64-xilinx-linux
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Install DNNDK &amp; DPU
    <ul>
      <li>è¯¥éƒ¨åˆ†<a href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2018_3/ug1144-petalinux-tools-reference-guide.pdf">æ–‡æ¡£å‚è€ƒUG1144</a>,æŒ‰ç…§P77 - Building User Moduleç« èŠ‚</li>
      <li><strong>é…ç½®è®¾å¤‡æ ‘</strong> åœ¨å®Œæˆæ­£å¸¸çš„kernel configä¹‹åï¼Œä¿®æ”¹è®¾å¤‡æ ‘ã€€å°†meta-user/recipes-bsp/device-tree/device-tree.bbappendå’Œè¯¥ç›®å½•ä¸‹files/dpu.dtsiå¤åˆ¶è¿›å»(TODO:å¯èƒ½è¿˜æœ‰ä¸€ä¸ªå¸¦includeçš„æ–‡ä»¶éœ€è¦é…ç½®)
        <ul>
          <li>å¦‚æœè®¾å¤‡æ ‘æ²¡æœ‰æ­£ç¡®é…ç½®çš„è¯ï¼Œç³»ç»Ÿå°†æ— æ³•å¯åŠ¨</li>
          <li>petalinux-buildä¹‹åç³»ç»Ÿæ–‡ä»¶å¤¹ä¸‹çš„dtsä¸dtsiæ–‡ä»¶ä¿®æ”¹æ˜¯æ²¡æœ‰ç”¨çš„,ä¸æ˜¯æ­£ç¡®ä¿®æ”¹æ–¹æ³•(è™½ç„¶æˆ‘ç¬¬ä¸€ååº”æ˜¯è¿™ä¹ˆä»¥ä¸ºçš„)</li>
        </ul>
      </li>
      <li><strong>é…ç½®dpué©±åŠ¨</strong>  ./recepts-modules/dpuæ–‡ä»¶å¤¹å†…å®¹å¤åˆ¶è¿›å»
        <ul>
          <li>åœ¨å¤åˆ¶ä¹‹å‰ï¼Œåˆ©ç”¨petalinuxçš„æŒ‡ä»¤åŠ å…¥è¯¥moduleã€€<code class="highlighter-rouge">petalinux-create -t modules --name dpu --enable</code>
            <ul>
              <li>å¦‚æœåœ¨å·²ç»buildè¿‡ä¹‹åçš„æ–‡ä»¶å¤¹ä¸‹åŠ å…¥dpu moduleï¼Œä¼šæŠ¥é”™äº†<code class="highlighter-rouge">Failed to open PetaLinux lib: librdi_commonxillic.so: cannot open shared object file: No such file or directory.</code>è§£å†³æ–¹æ¡ˆï¼Œæ–°å»ºå·¥ç¨‹</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><strong>ç¼–è¯‘</strong>
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  petalinux-build
  petalinux-build -c rootfs
  petalinux-build -x package
  petalinux-build  -c dpu       // (ç¡®ä¿è‡ªå»ºæ¨¡å—dpuè¢«å®‰è£…äº†)
  petalinux-build -c dpu -x do_insatll // (å®‰è£…dpuæ¨¡å—)
</code></pre></div>        </div>
        <ul>
          <li>å®Œæˆå®‰è£…ä¹‹å åœ¨ %(PROJECT_DIRECTORY)/build/tmp/work/zcu102_zynqmp-xilinx-linux/ç›®å½•ä¸‹åº”æœ‰dpu/</li>
        </ul>
      </li>
      <li><strong>å¯»æ‰¾å¹¶ä¿å­˜é©±åŠ¨æ–‡ä»¶</strong> petalinux-build å®Œæˆä¹‹åï¼Œåœ¨build/tmp/work/zcu102_zynqmp-xilinx-linux/petalinux-user-image/1.0-r0/rootfsä¸‹æœç´¢dpu.ko
        <ul>
          <li>åº”è¯¥åœ¨lib/linux-x.xx/extra/dpu.koï¼ŒåŠ å…¥æ–‡ä»¶ç³»ç»Ÿä¹‹åinsmodä¸€ä¸‹</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ç¼–è¯‘ï¼ˆé€šå¸¸æ—¶é—´è¾ƒé•¿10-30åˆ†é’Ÿï¼‰
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>petalinux-build
</code></pre></div>    </div>
    <p>è¯¥è¿‡ç¨‹ä¼šç”Ÿæˆä¸€ç³»åˆ—æ–‡ä»¶ï¼Œåœ¨<code class="highlighter-rouge">&lt;path-to-project&gt;/images/linux</code>æ–‡ä»¶å¤¹å†…ï¼Œæˆ‘ä»¬æœ€ç»ˆéœ€è¦ç”¨åˆ°çš„æ˜¯image.ub(å¯èƒ½è¿˜æœ‰ä¸€ä¸ªsystem.dtsè®¾å¤‡æ ‘)</p>
    <ul>
      <li>imageæ–‡ä»¶åº”è¯¥æ˜¯åœ¨è¿™ä¸€æ­¥éª¤äº§ç”Ÿçš„ï¼Œå¦‚æœæˆ‘ä»¬æŒ‰ç…§é»˜è®¤çš„é…ç½®çš„è¯å°±æ˜¯æŒ‰ç…§petalinuxçš„é»˜è®¤é…ç½®dtså’Œkernelé€‰æ‹©
        <ul>
          <li>å½“ç„¶å‰é¢å¦‚æœè°ƒç”¨è¿‡petalinux-config -c kernelçš„å°±ä½¿ç”¨çš„æ˜¯æˆ‘ä»¬é…ç½®çš„å†…æ ¸äº†</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>æ‰“åŒ…é•œåƒ
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>petalinux-package <span class="nt">--boot</span> <span class="nt">--format</span> BIN <span class="se">\</span>
    <span class="nt">--fsbl</span>   ./images/linux/zynqmp_fsbl.elf <span class="se">\</span>
    <span class="nt">--u-boot</span> ./images/linux/u-boot.elf <span class="se">\</span>
    <span class="nt">--pmufw</span>  ./images/linux/pmufw.elf <span class="se">\</span>
    <span class="nt">--fpga</span>   ./images/linux/<span class="k">*</span>.bit <span class="se">\</span>
    <span class="nt">--force</span>
</code></pre></div>    </div>
    <ul>
      <li>è¿™ä¸€æ­¥éª¤ä¸­å„ä¸ªæ–‡ä»¶çš„ä½œç”¨ï¼š
        <ul>
          <li>FSBL(1st Stage Bootloader)å’Œzynq7000çš„FSBLç›¸åŒï¼Œç”¨CortexA53ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©CortexR5æ¥åˆ¶ä½œ(å–å†³äºæ¿å¡çš„å¤„ç†å™¨å‹å·)</li>
          <li>pmufw.elfï¼ˆæ‰€æœ‰çš„.elfå…¶å®æ˜¯äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼‰MPSocç”¨æ¥æ›´å¥½çš„ç®¡ç†ç”µæºå’ŒåŠŸè€—ï¼Œä¸€èˆ¬ä¸éœ€è¦ä¿®æ”¹</li>
          <li>.bit PLçš„bitstream</li>
          <li>uboot.elf ubootæ–‡ä»¶ï¼Œä¸€èˆ¬æ¥è‡ªäºXilinxå®˜æ–¹æä¾›ï¼Œç¼–è¯‘</li>
          <li>image.ub ç”±kernelï¼Œrootfså’Œdevice treeæ‰“åŒ…æ¥çš„</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ä»¥ä¸Šæ­¥éª¤å®Œæˆä¹‹å,ä¼šåœ¨images/linux/ ç›®å½•ä¸‹äº§ç”ŸBOOT.BINå’Œimage.ubæ–‡ä»¶,è¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„</li>
</ol>

<h2 id="prepare-sd-card">Prepare SD Card</h2>
<ol>
  <li>ç¬¬ä¸€ä½¿ç”¨SDå¡æ—¶éœ€è¦å¯¹SDå¡è¿›è¡Œæ ¼å¼åŒ–å’Œåˆ†åŒºã€‚å¯åŠ¨gpartedï¼Œå°†SDå¡åˆ†ä¸ºä¸¤ä¸ªåˆ†åŒºï¼š
    <ul>
      <li>BOOTåˆ†åŒºï¼šæ ¼å¼ä¸ºFAT32ï¼Œå¤§å°è‡ªå®šä¹‰ï¼Œé€šå¸¸ä¸ºå‡ ç™¾MBï¼Œå¤Ÿç”¨å³å¯</li>
      <li>
        <p>ROOTFSåˆ†åŒºï¼šæ ¼å¼ä¸ºEXT4ï¼Œåˆ†é…å…¨éƒ¨å‰©ä½™ç©ºé—´å³å¯
ç»“æŸä¹‹åè®°å¾—æŠŠè¿™ä¸¤ä¸ªåˆ†åŒºmountä¸Š</p>
      </li>
      <li>è¿™é‡Œæœ‰æ—¶å€™ä¼šå‡ºç°æ‹”ä¸‹è¯»å¡å™¨ä¹‹åæ— æ³•umountåˆ†åŒºçš„æƒ…å†µ(æç¤ºdevice busy)
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  fuser <span class="nt">-km</span> <span class="s1">'ä¸èƒ½umountçš„åˆ†åŒºæ‰€åœ¨çš„ç›®å½•'</span>
  <span class="nb">sudo </span>umount <span class="s1">'ä¸èƒ½umountçš„åˆ†åŒº'</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>å°†BOOTå¿…è¦çš„æ–‡ä»¶æ‹·è´åˆ°SDå¡ä¸­
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> &lt;path-to-petalinux-project&gt;/images/linux
<span class="nb">cp </span>BOOT.BIN image.ub &lt;path-to-BOOT-of-SDCARD&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ‹·è´æ–‡ä»¶ç³»ç»Ÿã€‚å¯ä»¥ä½¿ç”¨<code class="highlighter-rouge">&lt;path-to-petalinux-project&gt;/images/linux</code>ä¸‹çš„rootfs.tar.gzï¼Œä¹Ÿå¯ä»¥è‡ªå·±ä¸‹è½½æ–‡ä»¶ç³»ç»Ÿï¼Œä¾‹å¦‚ä»ï¼š<a href="https://rcn-ee.com/rootfs/eewiki/minfs/">https://rcn-ee.com/rootfs/eewiki/minfs/</a>ã€‚æˆ–è€…æ˜¯è‡ªå·±æ„å»ºï¼Œä¹‹åå°†æ–‡ä»¶ç³»ç»Ÿè§£å‹ç¼©ï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> &lt;path-to-rootfs&gt;
<span class="c"># å°†æ–‡ä»¶ç³»ç»Ÿå¤åˆ¶åˆ°ROOTFSåˆ†åŒºä¸­ï¼Œæ³¨æ„ä¸å¯ä»¥ä½¿ç”¨cp</span>
<span class="nb">sudo </span>rsync <span class="nt">-av</span> ./ &lt;path-to-ROOTFS-of-SDCARD&gt;    
<span class="c"># æ¸…ç©ºç¼“å†²åŒºï¼Œç¡®ä¿æ–‡ä»¶å†™å…¥SDå¡</span>
<span class="nb">sync</span>
<span class="c"># ä¿®æ”¹æƒé™ï¼Œå¦åˆ™å¯åŠ¨ä»¥åä¼šå‡ºé—®é¢˜</span>
<span class="nb">sudo chown </span>root:root &lt;path-to-ROOTFS-of-SDCARD&gt;
<span class="nb">sudo chmod </span>755 &lt;path-to-ROOTFS-of-SDCARD&gt;
</code></pre></div>    </div>
    <ul>
      <li>è¯¥å‘½ä»¤çš„æ‰§è¡Œåœ°å€è¦åœ¨æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ä¸‹é¢(æ³¨æ„ä¸è¦é€‰é”™äº†)
        <ul>
          <li>æœ‰/bin /usr /home /bin /lib çš„é‚£ä¸ªç›®å½•</li>
          <li>å¦åˆ™OSä¸èƒ½æ­£ç¡®è¯†åˆ«Rootfsæ–‡ä»¶ç³»ç»Ÿ,ä¼šæŠ¥Kernel Panicçš„é”™è¯¯</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h2 id="board-setup">Board Setup</h2>
<ul>
  <li>å¼€å‘æ¿é…ç½®å¥½è·³çº¿è®¾ç½®(æ ¹æ®ZC102 DataSheet)
    <ul>
      <li>ç¡®ä¿å…¶æ˜¯ä»SDå¡å¯åŠ¨</li>
    </ul>
  </li>
  <li>å°†SDå¡æ’å…¥ä¸Šç”µ,é€šè¿‡DPè¿æ¥åˆ°æ˜¾ç¤ºå™¨</li>
  <li>æ³¨æ„å¦‚æœè¦ä½¿ç”¨å¤–è®¾(via USB2è½¬USB3æ¥å£(å›¾ä¸­é‚£ä¸ªå½¢æ€æ€ªå¼‚çš„è½¬æ¥å™¨,æ¿å¡æœ¬èº«é™„å¸¦)),éœ€è¦å°†J7çŸ­æ¥
    <ul>
      <li><img src="pics/J7.jpg" alt="" /> å›¾ä¸­é‚£ä¸ªè“è‰²çš„è·³çº¿</li>
    </ul>
  </li>
  <li>å› ä¸ºå†…æ ¸é…ç½®é—®é¢˜,å½“ä¸èƒ½ä½¿ç”¨é”®ç›˜è¾“å…¥çš„æ—¶å€™,å¯ä»¥é€šè¿‡ä¸²å£è¾“å…¥
    <ul>
      <li>åˆ©ç”¨micro usbçº¿è¿æ¥é è¿‘ç½‘å£çš„é‚£ä¸€ä¸ªmicro usbä¸ç”µè„‘</li>
      <li>å®‰è£…é©±åŠ¨åPCä¼šè¯†åˆ«å‡ºSilicon Bridge (4ä¸ªä¸²å£)
        <ul>
          <li>ç¬¬0,1ä¸ªæ˜¯PSçš„ä¸²å£: æˆ‘ä»¬éœ€è¦è§‚å¯Ÿçš„æ˜¯<strong>ä¸²å£0</strong>
            <ul>
              <li>ä¼šæ‰“å°ä¸€äº›è°ƒè¯•ä¿¡æ¯(å½“ç³»ç»Ÿèµ·ä¸èµ·æ¥çš„æ—¶å€™å°±é å®ƒDebugâ€¦)</li>
              <li>å½“é”®ç›˜å¤–è®¾æ²¡æœ‰é…ç½®æˆåŠŸçš„æ—¶å€™å¯ä»¥ç”¨æ¥å¾€é‡Œé¢è¾“å…¥(è®°ä½è¾“æŒ‡ä»¤çš„æ—¶å€™è¦æŠŠæ¢è¡Œä¹Ÿè¾“å…¥è¿›å»â€¦<strong>MobaXTermç‰›é€¼!æµç•…çš„è°ƒè¯•ï¼</strong>)</li>
            </ul>
          </li>
          <li>ç¬¬2ä¸ªæ˜¯PLä¾§çš„ä¸²å£</li>
          <li>ç¬¬ä¸‰ä¸ªæ˜¯æ¿è½½çš„MSP430çš„ä¸²å£</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="xilinx-example">Xilinx Example</h2>

<ul>
  <li>æŒ‰ç…§Xilinxçš„æœ€æ–°ç‰ˆæœ¬çš„<a href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18841937/Zynq+UltraScale+MPSoC+Ubuntu+part+2+-+Building+and+Running+the+Ubuntu+Desktop+From+Sources">æ•™ç¨‹</a>ï¼Œé‡‡ç”¨2018.3çš„Vivadoå’ŒPetalinuxï¼ŒæŒ‰ç…§è¿™ä¸ªæ•™ç¨‹ï¼Œæ˜¯å¯ä»¥æ­£ç¡®è¿è¡Œçš„</li>
  <li>å”¯ä¸€å’Œæ•™ç¨‹ä¸­ä¸å¤§ä¸€æ ·çš„å‡ ä¸ªç‚¹
    <ul>
      <li>åœ¨å†…æ ¸ç¼–è¯‘çš„æ—¶å€™ï¼Œæœ‰ä¸€é¡¹æ˜¯é€‰æ‹©usb driverä¸‹çš„proper part,é™¤äº†â€disbale hubâ€ä¹‹å¤–æˆ‘å…¨éƒ¨é€‰æ‹©äº†</li>
      <li>ç»™çš„tclæ–‡ä»¶å¹¶ä¸ä¼šåƒå®ƒæ‰€è¯´çš„èƒ½å¤Ÿç›´æ¥ç”Ÿæˆhdfï¼Œè€Œæ˜¯è¦è‡ªå·±æ‰‹åŠ¨generate output products-&gt;create hdl wrapperä¹‹åexport hardware
        <ul>
          <li>è¿™é‡Œä¸éœ€è¦ç»¼åˆç”Ÿæˆbitï¼Œè¾“å‡ºçš„hdf fileä¸­æè¿°äº†ç¡¬ä»¶èµ„æºå’Œarm cpuçš„è¿æ¥å³å¯</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>æœ€åçš„imgä¼šæŠ¥å¾ˆå¤šé”™è¯¯â€¦ä½†æ˜¯å…¶å®èƒ½èµ·æ¥ï¼Œä¸ç”¨å»ç®¡</strong>
    <ul>
      <li><code class="highlighter-rouge">Unable to Load Kernel Moduleè¿™ç§é”™è¯¯ä¹Ÿå±äºæ­£å¸¸...</code></li>
    </ul>
  </li>
  <li><strong>æˆ‘åœ¨æ˜¾ç¤ºè¿™é‡Œå¡äº†å¥½å‡ å¤©ï¼Œå°è¯•å»è§£å†³å¾ˆå¤šbootæ—¶å€™çš„æŠ¥é”™ä¿¡æ¯ï¼Œä½†æ˜¯ä»–ä»¬å…¶å®éƒ½æ­£å¸¸ï¼ï¼ï¼å®é™…å‡ºé”™çš„æ˜¯hdmi-&gt;DPçš„çº¿æœ‰é—®é¢˜ï¼æˆ‘ç”¨çš„æ˜¯æ— æºçš„è½¬æ¥å™¨ï¼Œé‚£æ ·ä¸è¡Œï¼</strong></li>
  <li>å®˜æ–¹æœ€åä¸€æ¬¡ç»™çš„æ–‡ä»¶ï¼Œèƒ½èµ·
    <ul>
      <li><img src="pics/xilinx_example.jpg" alt="" /></li>
    </ul>
  </li>
</ul>

<h2 id="self-build-rootfs-start-desktop">Self-Build Rootfs Start Desktop</h2>
<ul>
  <li>åˆ°è¿™ä¸€æ­¥ä½ éœ€è¦æœ‰çš„ï¼š
    <ul>
      <li>Ubuntu Rootfs:èƒ½è”ç½‘apt-get</li>
    </ul>
  </li>
  <li>ä¸‰ç§ç™»å½•æ–¹å¼
    <ul>
      <li>ç›´æ¥é€šè¿‡æ¿å­USBçš„é”®ç›˜é¼ æ ‡ï¼Œå’Œæ˜¾ç¤ºå™¨ç™»å½•</li>
      <li>ä»microusbç™»å½•</li>
      <li>é€šè¿‡sshç™»å½•</li>
    </ul>
  </li>
  <li>æœ‰ä¸€äº›åŒ…æ˜¯éœ€è¦å®‰è£…çš„ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€
    <ul>
      <li>lsmod -&gt; apt-get install kmod</li>
      <li>Network-Managerã€€ï¼ˆæ£€æŸ¥ç½‘ç»œï¼‰</li>
      <li>xinitã€€-&gt; åŒ…å«äº†startxå‘½ä»¤ (å®‰è£…çš„æ—¶å€™ä¼šè®©ä½ configä¸€ä¸‹é”®ç›˜)</li>
      <li>psmiscã€€-&gt;ã€€åŒ…å«äº†pstree(æŸ¥çœ‹systemdçš„æœåŠ¡)</li>
    </ul>
  </li>
  <li>æœ‰ä¸€äº›configçš„ç›¸å…³æ–‡ä»¶éœ€è¦å¤åˆ¶è¿‡å»
    <ul>
      <li>/etc/X11/xorg.conf.d/zynqmp.conf</li>
      <li>driveræ–‡ä»¶
        <ul>
          <li>malixx.so    /usr/lib/x11/libmalixxxã€€ï¼ˆè¿™ä¸ªåæ¥ç»è¿‡æµ‹è¯•æ²¡æœ‰ä¹Ÿå¯ä»¥ï¼‰</li>
          <li>armsoc_drv.so /usr/lib/xorg/modules/drivers/armsoc</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>å¼€æœºæ‰‹åŠ¨Loadã€€Arm Mali GPUé©±åŠ¨</strong>
    <ul>
      <li>å¤åˆ¶mali.koæ–‡ä»¶åˆ°æœ¬æœº
        <ul>
          <li>å¹¶ä¸”åœ¨/etc/rc.localæ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œã€€<code class="highlighter-rouge">insmod mali.ko</code>
            <h4 id="åšåˆ°è¿™ä¸€æ­¥æ˜¯rootfs-9-1-baseçš„çŠ¶æ€">åšåˆ°è¿™ä¸€æ­¥æ˜¯rootfs-9-1-baseçš„çŠ¶æ€</h4>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>å®‰è£…æ¡Œé¢ç¯å¢ƒ
    <ul>
      <li>xfce4 <code class="highlighter-rouge">sudo apt-get install xfce4</code>
        <ul>
          <li>ç„¶åå‘½ä»¤è¡Œç™»å½•çš„æ—¶å€™ <code class="highlighter-rouge">startxfce4</code>
            <ul>
              <li>BUG1: åªèƒ½åœ¨rootæˆ–æ˜¯sudoçš„æƒ…å†µä¸‹è¿›è¡Œç™»å½•</li>
              <li>BUG2: åªèƒ½ä½¿ç”¨æ˜¾ç¤ºå™¨é»˜è®¤åˆ†è¾¨ç‡ï¼Œå¦‚æœä¿®æ”¹åˆ†è¾¨ç‡ä»…ä»…é€šè¿‡xrandræˆ–è€…æ˜¯å›¾å½¢ç•Œé¢é‡Œé¢çš„å¥½åƒä¸è¡Œï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹zynqmp.confæ–‡ä»¶å¹¶æ·»åŠ æ¨¡å¼(ä»…æµ‹è¯•è¿‡ä¸€æ¬¡)
                <ul>
                  <li>å‚è€ƒrootfs-9-1-xfce4çš„zynqmp.confæ–‡ä»¶ï¼Œè‡ªå·±åŠ äº†ä¸€ä¸ªMonitorï¼Œå¹¶ä¸”è®¾ç½®äº†åˆ†è¾¨ç‡,è¿™ç§æ–¹å¼è®¾ç½®åº”è¯¥å¼€æœºé»˜è®¤å°±æ˜¯1920x1080</li>
                </ul>
              </li>
              <li>BUG3: è¯¥æ–¹å¼å’Œxdmä¸å…¼å®¹ï¼Œè‹¥å®‰è£…xdm(çª—å£ç®¡ç†å™¨)å¹¶ä¸”å¼€æœºè‡ªå¯åŠ¨ï¼Œç™»å½•ä¹‹åä¼šç™»å½•ä¸ä¸Š</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><img src="pics/xfce.jpg" alt="" /></li>
      <li>åœ¨Xorg(å›¾å½¢ç•Œé¢çš„å¯åŠ¨ä¸­ï¼Œè¿™æ ·çš„ä¸€è¡Œé”™è¯¯å±äºæ­£å¸¸ç°è±¡)
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  [   139.191] (EE) AIGLX error: dlopen of /usr/lib/aarch64-linux-gnu/dri/armsoc_d
  ri.so failed (/usr/lib/aarch64-linux-gnu/dri/armsoc_dri.so: cannot open shared oo
  bject file: No such file or directory)
  [   139.191] (EE) AIGLX: reverting to software rendering
</code></pre></div>        </div>
      </li>
      <li>æœ€ååº”å½“å‡ºç°çš„ç°è±¡ï¼š
        <ul>
          <li>å¼€å‘æ¿å¯åŠ¨ä»å‘½ä»¤è¡Œç™»å½•ï¼Œè¾“å…¥ç”¨æˆ·åå’Œå¯†ç </li>
          <li>è¾“å…¥<code class="highlighter-rouge">sudo startx</code>æˆ–è€…<code class="highlighter-rouge">sudo startxfce4</code>
            <h4 id="è¿™é‡Œå¤‡ä»½ä¸ºäº†rootfs-9-2">è¿™é‡Œå¤‡ä»½ä¸ºäº†rootfs-9-2</h4>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="install-ros">Install ROS</h2>
<ul>
  <li>æœ¬éƒ¨åˆ†åŸºæœ¬å®Œå…¨å‚è€ƒ<a href="https://github.com/xxzzll11111/SDcard_ROS_SPSLAM/blob/master/README.md">è¯¥æ•™ç¨‹</a>,ä»¥åŠ<a href="https://sychaichangkun.gitbooks.io/ros-tutorial-icourse163/content/chapter1/1.4.html">è¯¥æ•™ç¨‹</a>
    <ul>
      <li>è¯¥æ•™ç¨‹çš„ç³»ç»Ÿç¯å¢ƒæ˜¯Debian9ï¼Œæˆ‘ä»¬çš„ç¯å¢ƒæ˜¯Ubuntu16.04,éœ€è¦åšä¸€å®šæ”¹å˜ã€€melodic -&gt; kinetic</li>
    </ul>
  </li>
  <li>æ³¨æ„ä¸€ä¸‹è¦å®‰è£…è‡ªå·±ç³»ç»Ÿæ‰€å¯¹åº”ç‰ˆæœ¬çš„Ubnutuï¼š
    <ul>
      <li>Ubuntu16.04 -&gt; Kineticã€€[*]</li>
      <li>Ubnutu14.04 -&gt; Indigo</li>
      <li>Debian9 -&gt; Melodic
        <ol>
          <li>é‡è£…Opencv</li>
        </ol>
      </li>
      <li>ç§»é™¤æœ¬èº«çš„OpenCV  <code class="highlighter-rouge">sudo rm -r /usr/local/include/opencv2 /usr/local/include/opencv /usr/include/opencv /usr/include/opencv2 /usr/local/share/opencv /usr/local/share/OpenCV /usr/share/opencv /usr/share/OpenCV /usr/local/bin/opencv* /usr/local/lib/libopencv*</code></li>
      <li>å®‰è£…å„ç§ä¾èµ–ã€€(ç»è¿‡è‡ªå·±æµ‹è¯•éƒ½èƒ½è¿‡æ‰€ä»¥å†™æˆè„šæœ¬ä¸€æ¬¡æ€§äº†)
        <ul>
          <li>ã€€./ros_install_dep.sh</li>
        </ul>
      </li>
      <li>ä¸‹è½½å¹¶è§£å‹OpenCVã€€from <a href="https://github.com/opencv/opencv/releases/tag/3.ï¼“.0">è¿™ä¸ªé“¾æ¥</a>
        <blockquote>
          <p>å¦‚æœåªæ˜¯è¦å®‰è£…ROSçš„è¯å…¶å®ä»€ä¹ˆç‰ˆæœ¬çš„Opencvéƒ½å¯ä»¥ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨DNNDKçš„è¯<strong>ä¸€å®š</strong>è¦å®‰è£…å…¶å¯¹åº”ç‰ˆæœ¬çš„Opencvã€€ï¼ˆDNNDK V2.08 - Opencv V3.1.0ï¼›ã€€DNNDK V3.0 - Opencv V3.3.0ï¼ˆ3.3.1éƒ½ä¸è¡Œï¼‰ï¼‰</p>
        </blockquote>
      </li>
      <li>ä¸ºäº†æ­£å¸¸çš„è¿è¡ŒDPUæä¾›çš„ä¾‹å­ï¼Œè¿˜éœ€è¦OpencvContribçš„ä¾èµ–ï¼ŒåŒæ ·ä»githubä¸Š<a href="https://github.com/opencv/opencv_contrib/releases/tag/3.3.0">ä¸‹è½½</a>(æ³¨æ„ç‰ˆæœ¬å¯¹åº”)ï¼Œå°†å…¶è§£å‹åˆ°ä¸€ä¸ªä½ç½®</li>
      <li>Build! ï¼ˆå°ç ´CPUéœ€è¦è·‘ä¸ªå¿«15minï¼‰</li>
      <li>
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  cd opencv-3.1.0
  mkdir build
  cd build
  cmake -D CMAKE_BUILD_TYPE=Release -D CMAKE_INSTALL_PREFIX=/usr/local -D ENABLE_PRECOMPILED_HEADERS=OFF -DOPENCV_EXTRA_MODULES_PATH=&lt;opencv_contrib&gt;modulesã€€..
  make
  sudo make install
  sudo sh -c 'echo "/usr/local/lib" &gt;&gt; /etc/ld.so.conf.d/opencv.conf'
  sudo ldconfig
</code></pre></div>        </div>
        <blockquote>
          <p>æ³¨æ„contrib_pathçš„modulesåé¢ä¸è¦åŠ  â€˜/â€™</p>
        </blockquote>
      </li>
      <li>bashç›¸å…³çš„é…ç½®</li>
      <li>
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  sudo vim /etc/bash.bashrc
  # åœ¨æœ€æœ«å°¾æ·»åŠ 
  PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig 
  export PKG_CONFIG_PATH

  # ä¿å­˜ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä½¿å¾—é…ç½®ç”Ÿæ•ˆ
  source /etc/bash.bashrc

  # æ›´æ–°
  sudo updatedb

</code></pre></div>        </div>
        <ol>
          <li>å®‰è£…ROS</li>
        </ol>
      </li>
      <li>æ·»åŠ sources.list; ppa-keyå¹¶å®‰è£…,æœ€åçš„æ¡Œé¢ç¯å¢ƒæœ‰2Gå·¦å³ï¼Œéœ€è¦å®‰è£…å¥½ä¹…
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  sudo sh -c '. /etc/lsb-release &amp;&amp; echo "deb http://mirrors.ustc.edu.cn/ros/ubuntu/ stretch main" &gt; /etc/apt/sources.list.d/ros-latest.list'
  sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654
  sudo apt-get update &amp;&amp; sudo apt-get upgrade
  sudo apt-get install ros-kinetic-desktop-full # Ubuntu 16.04
</code></pre></div>        </div>
      </li>
      <li>åˆå§‹åŒ– rosdep
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  sudo rosdep init
  rosdep update
</code></pre></div>        </div>
      </li>
      <li>ROSç¯å¢ƒé…ç½®
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  echo "source /opt/ros/kinetic/setup.bash" &gt;&gt; ~/.bashrc
  source ~/.bashrc
</code></pre></div>        </div>
      </li>
      <li>ROSç¯å¢ƒé…ç½®
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  sudo apt-get install python-rosinstall python-rosinstall-generator python-wstool buid-essential
</code></pre></div>        </div>
        <ol>
          <li>æµ‹è¯•ç¯å¢ƒ(å‚è€ƒäº†<a href="https://blog.csdn.net/WY_star1/article/details/81564319">è¿™ä¸ªé“¾æ¥</a>)</li>
        </ol>
      </li>
      <li>Turtle demo
        <ul>
          <li>
            <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>roscore &amp;
rosrun turtlesim turtlesim_node &amp;
rosrun turtlesim turtle_teleop_key &amp; 
</code></pre></div>            </div>
          </li>
          <li>ç”¨é”®ç›˜ç§»åŠ¨ä¹Œé¾Ÿå§!
            <h4 id="è¿™é‡Œå¤‡ä»½ä¸ºäº†rootfs-9-ï¼“-withros">è¿™é‡Œå¤‡ä»½ä¸ºäº†rootfs-9-ï¼“-withros</h4>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="install-dnndk-on-evaluation-board">Install DNNDK On Evaluation Board</h2>
<ul>
  <li>å‚è€ƒ<a href="">ug1327</a>  P20
    <ol>
      <li>åœ¨å®˜ç½‘ä¸‹è½½DPUæ‰€å¯¹åº”ç‰ˆæœ¬çš„DNNDKï¼Œè§£å‹ä¹‹åå°†ZCU102/æ–‡ä»¶é€šè¿‡scpå¤åˆ¶åˆ°æ¿å­ä¸Š</li>
      <li>ä¿®æ”¹install.sh(åˆ é™¤å®‰è£…dpué©±åŠ¨ä»¥åŠè¦†ç›–BOOT.BINä»¥åŠè®¾å¤‡æ ‘çš„éƒ¨åˆ†)(å‚è€ƒ../bak/install.sh)</li>
    </ol>
    <ul>
      <li>æ—¢ç„¶è¿™é‡Œå–æ¶ˆäº†ï¼Œç³»ç»Ÿåº”è¯¥é»˜è®¤å®Œæˆäº†insmodæˆ‘ä»¬è‡ªå·±çš„dpué©±åŠ¨
        <ol>
          <li>è¿è¡Œinstall.shåº”è¯¥èƒ½æ˜¾ç¤ºsuccess</li>
        </ol>
      </li>
    </ul>
  </li>
  <li>åˆ©ç”¨<code class="highlighter-rouge">dexplorer -v/w</code>æ¥æ£€æµ‹å®‰è£…æ˜¯å¦æˆåŠŸ
    <ul>
      <li>è¿™é‡Œç”±äºå®‰è£…è„šæœ¬æ—¶å€™ç”¨äº†sudoå¯¼è‡´ä¸€äº›è¿è¡Œæƒé™çš„é—®é¢˜ å»/usr/locall/binã€€æŠŠPermission Deniedçš„å¯¹åº”å‘½ä»¤ç»™chmodäº†å°±å¥½äº†</li>
      <li>-v OUTPUT Is Like
  ```
  DNNDK version  3.0
  Copyright @ 2018-2019 Xilinx Inc. All Rights Reserved.</li>
    </ul>

    <p>DExplorer version 1.5
  Build Label: Apr 25 2019 09:50:06</p>

    <p>DSight version 1.4
  Build Label: Apr 25 2019 09:50:06</p>

    <p>N2Cube Core library version 2.3
  Build Label: Apr 25 2019 09:50:20</p>

    <p>DPU Driver version 2.2.0
  Build Label: Sep  3 2019 13:16:19</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  * -w OUTPUT is like 
</code></pre></div>    </div>
    <p>[DPU IP Spec]
  IP  Timestamp   : 2019-09-03 10:45:00
  DPU Core Count  : 2</p>

    <p>[DPU Core List]
  DPU Core        : #0
  DPU Enabled     : Yes
  DPU Arch        : B4096F
  DPU Target      : v1.4.0
  DPU Freqency    : 325 MHz
  DPU Features    : Avg-Pooling, LeakyReLU/ReLU6, Depthwise Conv
  DPU Core        : #1
  DPU Enabled     : Yes
  DPU Arch        : B4096F
  DPU Target      : v1.4.0
  DPU Freqency    : 325 MHz
  DPU Features    : Avg-Pooling, LeakyReLU/ReLU6, Depthwise Conv</p>

    <p>[DPU Extension List]
  Extension Softmax
  Enabled         : Yes
  ``` 
      4. ä½¿ç”¨TRDä¸­æ‰€åŒ…å«çš„Demo Resnet50</p>
  </li>
  <li>ä»trdå½“ä¸­å¤åˆ¶resnetæ–‡ä»¶å¤¹(åŒ…æ‹¬äº†å¯æ‰§è¡Œæ–‡ä»¶ä¸pics)</li>
  <li>æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ã€€resnet50
    <ul>
      <li>å¯æ‰§è¡Œæ–‡ä»¶å¯èƒ½æ²¡æœ‰è¿è¡Œæƒé™,chmodä¸€ä¸‹
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd $DIRECTORY_TO_EXEUCATBLE
./resnet50
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>åˆ°è¿™ä¸€æ­¥éª¤ç†è®ºä¸Šä¼šæŠ¥ä¸€ä¸ªã€€<code class="highlighter-rouge">Error Loading Shared Lib: libopencv_core.so.3.1</code>
    <blockquote>
      <p>è¿™å¹¶ä¸æ˜¯æ„æ€æ˜¯éœ€è¦Opencv.so.3.1,å¯èƒ½æ˜¯ä¸€ä¸ªå¥‡å¦™é”™è¯¯ï¼Œåªè¦æŠŠå®ƒæŒ‡å‘æˆ‘ä»¬çš„libopencv_core.so.3.3.0å°±å¯ä»¥</p>
      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /usr/local/lib
sudo ln -s libopencv_core.so.3.3.0 libopencv_core.so.3.1 // åˆ›å»ºä¸€ä¸ªlibopencv_core.so.3.1æŒ‡å‘libopencv_core.so.3.3.0
</code></pre></div>      </div>
    </blockquote>
  </li>
  <li>ç„¶ååº”è¯¥å°±èƒ½å¾—åˆ°æ­£ç¡®çš„ç»“æœäº†</li>
</ul>

<h1 id="trouble-shooting">Trouble Shooting</h1>
<ul>
  <li>ç³»ç»Ÿèµ·ä¸èµ·æ¥ï¼Œåªæ˜¾ç¤ºåˆ°äº†Bootloader
    <ul>
      <li>å¤§æ¦‚ç‡æ˜¯hdfæ–‡ä»¶çš„ç‰ˆæœ¬é”™äº†</li>
    </ul>
  </li>
  <li>DP å‡ºç”»é¢ä¹‹å
    <ul>
      <li>Kernel Panic: ç›¸å½“å¸¸è§çš„é”™è¯¯,å¯èƒ½åŸå› æœ‰å¾ˆå¤š
        <ul>
          <li>æ£€æŸ¥Rootfsçƒ§å†™è¿›çš„æ–‡ä»¶å¤¹ä½ç½®æ˜¯å¦æ­£ç¡®</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>èƒ½å¤Ÿæ­£å¸¸å¯åŠ¨ç³»ç»Ÿ,ä½†æ˜¯ä¸²å£ä¸­å‡ºæ¥çš„logå¡ä¸»
    <ul>
      <li>å¹¶ä¸æ˜¯ä»£è¡¨ç³»ç»Ÿæ²¡èµ·æ¥ï¼Œå…¶å®é“¾æ¥æ˜¾ç¤ºå™¨å¹¶ä¸”ä½¿ç”¨é”®ç›˜çš„è¯æ˜¯å¯ä»¥æ­£å¸¸ç™»å½•çš„</li>
      <li>æ ¸å¿ƒåŸå› æ˜¯æŒ‚è½½ç‚¹æ²¡æœ‰åŒ…å«æ­£ç¡®çš„ä¸²å£è®¾å¤‡å¯¼è‡´æ–‡ä»¶ç³»ç»Ÿä¸èƒ½ä»ä¸²å£ç™»å½•</li>
      <li>å‚è€ƒäº†<a href="https://forums.xilinx.com/t5/Embedded-Linux/Petalinux-2017-2-Ubuntu-RFS-on-Zynq-timed-out-waiting-for-device/td-p/800863">è¿™ä¸ªå¸–å­</a></li>
      <li>éœ€è¦é‡æ–°å®šå‘ä¸€ä¸‹ <code class="highlighter-rouge">ln -s /lib/systemd/system/getty@.service /etc/systemd/system/getty.target.wants/getty@ttyPS0.service</code></li>
    </ul>
  </li>
  <li>ç³»ç»Ÿä¹Ÿèƒ½å¤Ÿæ­£å¸¸å¯åŠ¨äº†ä½†æ˜¯ä¸èƒ½æ­£å¸¸çš„é“¾æ¥ç½‘ç»œ
    <ul>
      <li>ifconfigå‡ºIPåœ°å€ï¼Œeth0åªæœ‰IPV6æ²¡æœ‰IPV4</li>
      <li>åˆæ­¥åˆ¤æ–­æ˜¯DHCPæ²¡æœ‰workï¼Œå¯ä»¥æ”¹ä¸ºæ‰‹åŠ¨é…ç½®é™æ€IPï¼Œè¿™ä¸ªå› äººè€Œå¼‚äº†
        <ul>
          <li>å¯èƒ½æ˜¯rootfsæ²¡æœ‰dncp module,é¦–å…ˆé…ç½®é™æ€IPè®©ä»–èƒ½å¤Ÿè¿ç½‘
            <ul>
              <li><code class="highlighter-rouge">sudo apt-get install dhcpcd5</code></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>(å…¶å®è®²é“ç†DHCPåº”è¯¥èµ·èº«æ˜¯èƒ½æ­£å¸¸workçš„ï¼Œæˆ‘é…ç½®é™æ€IPä¹Ÿæ²¡æœ‰å…¶æ•ˆæœï¼Œæœ€åæ¢äº†ä¸€ä¸ªç½‘å£å°±å¥½äº†,åŸå› æœªçŸ¥)</li>
    </ul>
  </li>
  <li>ç³»ç»Ÿå¯åŠ¨ä¹‹åç™»å½•çš„æ—¶å€™å°±æŠ¥ä¸€ä¸ªä¸æƒé™æœ‰å…³çš„é”™è¯¯ï¼Œç„¶åå‘ç°è‡ªåŠ¨è¡¥å…¨çš„æ—¶å€™ä¼šæŠ¥é”™ Couldnâ€™t create xxx <strong>Read Only File System</strong>
    <ul>
      <li>æˆ‘æ˜¯æ›´æ¢äº†boot.binä½†æ˜¯æ²¡æœ‰æ›´æ¢rootfsï¼Œä¸çŸ¥é“å¯¹æ–‡ä»¶ç³»ç»Ÿçš„æƒé™åšäº†å•¥å¯¼è‡´å®ƒåäº†</li>
      <li>åœ¨å®¿ä¸»æœºä¸Šé¦–å…ˆå°†rootfsçš„åŒºå—umountï¼ˆæˆ‘çš„æ˜¯/dev/sdd2ï¼‰ç„¶åé‡‡ç”¨<code class="highlighter-rouge">fsckã€€/dev/sdd2</code>çš„æ–¹å¼ä¿®å¤(ä¸ªäººæŒ‰äº†ä¸€ä¸‡ä¸‹yï¼Œæœ¬æ¥ä»¥ä¸ºé“å®šæ²¡ç”¨äº†ï¼Œæœ€åå±…ç„¶å¥½åƒä¹Ÿè®¸æˆåŠŸäº†ï¼Ÿï¼Ÿã€€&lt;-æˆ‘æ˜¯å¼±æ™ºï¼ŒæŒ‡ä»¤åé¢åŠ -y)
        <ul>
          <li>ç¬¬äºŒæ¬¡æ“ä½œå‘ç°æ²¡ç”¨â€¦(é éš¾é“æ˜¯æˆ‘buildå‡ºæ¥çš„ä¸œè¥¿ä¸å¯¹ï¼Ÿ - å¥½åƒæˆ‘è‡ªå·±buildå‡ºæ¥çš„éƒ½ä¼šä¸€å¼€å§‹æœ‰readonly file system)</li>
          <li>ç„¶åç”¨äº† <code class="highlighter-rouge">mount -o remount rw</code>æ­£å¸¸äº†,åŠ å…¥æ–‡ä»¶ç³»ç»Ÿçš„/etc/profileä¸­ï¼Œæ¯æ¬¡ç™»å½•ç›´æ¥è¿è¡Œ</li>
        </ul>
      </li>
      <li>å¦‚æœä»¥ä¸Šæ“ä½œéƒ½æ²¡æœ‰ç”¨ï¼Œæ£€æŸ¥SDå¡çš„åªè¯»å¼€å…³æ˜¯å¦è¢«ç§»åŠ¨äº†</li>
    </ul>
  </li>
  <li>åœ¨é…ç½®Xorg(å›¾å½¢ç•Œé¢)çš„è¿‡ç¨‹ä¸­,sshç™»å½•æ—¶é—´é•¿,ä¸€æ®µæ—¶é—´ä¹‹åå‡ºç°ã€€ã€€<code class="highlighter-rouge">xauth: â€œtimeout in locking authority file /home//.Xauthorityâ€</code>
    <ul>
      <li>å‚è€ƒäº†<a href="https://blog.csdn.net/qq_39101111/article/details/78727843">è¿™ä¸ªé“¾æ¥</a>çš„è§£å†³åŠæ³•,åˆ«äººè¯´åˆ é™¤~/ç›®å½•ä¸‹ä¸.Xauthorityç›¸å…³çš„æ–‡ä»¶</li>
      <li>è¿™ä¸ªå¥½åƒå°±æ˜¯Xorgæ²¡æœ‰é…ç½®æ­£ç¡®çš„æ­£å¸¸ç°è±¡â€¦ç¨ç­‰ä¸€ä¼š</li>
    </ul>
  </li>
</ul>
:ET